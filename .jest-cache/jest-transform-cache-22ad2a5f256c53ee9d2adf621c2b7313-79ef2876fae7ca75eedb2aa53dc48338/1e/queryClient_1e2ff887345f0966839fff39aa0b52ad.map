{"version":3,"names":["_reactQuery","require","_asyncStorage","_interopRequireDefault","queryClient","exports","QueryClient","defaultOptions","queries","staleTime","gcTime","retry","retryDelay","attemptIndex","Math","min","ensureValidKey","key","trim","length","err","Error","then","_ref","trackAIError","code","message","severity","timestamp","Date","recoverable","context","catch","storage","setItem","_setItem","_asyncToGenerator2","default","value","AsyncStorage","_x","_x2","apply","arguments","getItem","_getItem","_x3","removeItem","_removeItem","_x4","safeStorageKey","base","suffix","fallback","undefined","baseStr","suf"],"sources":["queryClient.ts"],"sourcesContent":["\nimport { QueryClient } from '@tanstack/react-query';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 1000 * 60 * 5, // 5 minutes\n      gcTime: 1000 * 60 * 60 * 24, // 24 hours\n      retry: 3,\n      retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000),\n    },\n  },\n});\n\n// Storage utilities for React Query persistence\nfunction ensureValidKey(key: string): void {\n  if (!key || typeof key !== 'string' || key.trim().length === 0) {\n    const err = new Error('AsyncStorage: Invalid key provided');\n    // Best-effort telemetry\n    import('@/features/ai/telemetry/aiTelemetry')\n      .then(({ trackAIError }) =>\n        trackAIError({ code: 'storage_error' as any, message: 'Invalid storage key', severity: 'medium' as any, timestamp: new Date(), recoverable: false, context: { key } })\n      )\n      .catch(() => {});\n    throw err;\n  }\n}\n\nexport const storage = {\n  setItem: async (key: string, value: string) => {\n    ensureValidKey(key);\n    await AsyncStorage.setItem(key, value);\n  },\n  getItem: async (key: string) => {\n    ensureValidKey(key);\n    return await AsyncStorage.getItem(key);\n  },\n  removeItem: async (key: string) => {\n    ensureValidKey(key);\n    await AsyncStorage.removeItem(key);\n  },\n};\n\n// Güvenli anahtar üretimi: tanımsız/boş anahtarları kullanıcı-id veya sabit prefix ile güvene alır\nexport function safeStorageKey(base: string | undefined | null, suffix?: string, fallback: string = 'anon'): string {\n  const baseStr = typeof base === 'string' && base.trim().length > 0 ? base : fallback;\n  const suf = typeof suffix === 'string' && suffix.trim().length > 0 ? `_${suffix}` : '';\n  return `${baseStr}${suf}`;\n}\n"],"mappings":"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","ignoreList":[]}