afa0b858641a0d022d8e9df64da0f4ba
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.VALUE_BYTES_LIMIT = void 0;
exports.byteCountOverLimit = byteCountOverLimit;
var VALUE_BYTES_LIMIT = exports.VALUE_BYTES_LIMIT = 2048;
function byteCountOverLimit(value, limit) {
  var bytes = 0;
  for (var i = 0; i < value.length; i++) {
    var codePoint = value.charCodeAt(i);
    if (codePoint >= 0xd800 && codePoint < 0xe000) {
      if (codePoint < 0xdc00 && i + 1 < value.length) {
        var next = value.charCodeAt(i + 1);
        if (next >= 0xdc00 && next < 0xe000) {
          bytes += 4;
          if (bytes > limit) {
            return true;
          }
          i++;
          continue;
        }
      }
    }
    bytes += codePoint < 0x80 ? 1 : codePoint < 0x800 ? 2 : 3;
    if (bytes > limit) {
      return true;
    }
  }
  return bytes > limit;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWQUxVRV9CWVRFU19MSU1JVCIsImV4cG9ydHMiLCJieXRlQ291bnRPdmVyTGltaXQiLCJ2YWx1ZSIsImxpbWl0IiwiYnl0ZXMiLCJpIiwibGVuZ3RoIiwiY29kZVBvaW50IiwiY2hhckNvZGVBdCIsIm5leHQiXSwic291cmNlcyI6WyIuLi9zcmMvYnl0ZUNvdW50ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IFZBTFVFX0JZVEVTX0xJTUlUID0gMjA0ODtcblxuLy8gbm90ZSB0aGlzIHByb2JhYmx5IGNvdWxkIGJlIEpTLWVuZ2luZSBkZXBlbmRlbnRcbi8vIGluc3BpcmVkIGJ5IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zOTQ4ODY0M1xuZXhwb3J0IGZ1bmN0aW9uIGJ5dGVDb3VudE92ZXJMaW1pdCh2YWx1ZTogc3RyaW5nLCBsaW1pdDogbnVtYmVyKTogYm9vbGVhbiB7XG4gIGxldCBieXRlcyA9IDA7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGNvZGVQb2ludCA9IHZhbHVlLmNoYXJDb2RlQXQoaSk7XG5cbiAgICAvLyBMb25lIHN1cnJvZ2F0ZXMgY2Fubm90IGJlIHBhc3NlZCB0byBlbmNvZGVVUklcbiAgICBpZiAoY29kZVBvaW50ID49IDB4ZDgwMCAmJiBjb2RlUG9pbnQgPCAweGUwMDApIHtcbiAgICAgIGlmIChjb2RlUG9pbnQgPCAweGRjMDAgJiYgaSArIDEgPCB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgbmV4dCA9IHZhbHVlLmNoYXJDb2RlQXQoaSArIDEpO1xuXG4gICAgICAgIGlmIChuZXh0ID49IDB4ZGMwMCAmJiBuZXh0IDwgMHhlMDAwKSB7XG4gICAgICAgICAgYnl0ZXMgKz0gNDtcbiAgICAgICAgICBpZiAoYnl0ZXMgPiBsaW1pdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGkrKztcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGJ5dGVzICs9IGNvZGVQb2ludCA8IDB4ODAgPyAxIDogY29kZVBvaW50IDwgMHg4MDAgPyAyIDogMztcbiAgICBpZiAoYnl0ZXMgPiBsaW1pdCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVzID4gbGltaXQ7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQU8sSUFBTUEsaUJBQWlCLEdBQUFDLE9BQUEsQ0FBQUQsaUJBQUEsR0FBRyxJQUFJO0FBSS9CLFNBQVVFLGtCQUFrQkEsQ0FBQ0MsS0FBYSxFQUFFQyxLQUFhO0VBQzdELElBQUlDLEtBQUssR0FBRyxDQUFDO0VBRWIsS0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdILEtBQUssQ0FBQ0ksTUFBTSxFQUFFRCxDQUFDLEVBQUUsRUFBRTtJQUNyQyxJQUFNRSxTQUFTLEdBQUdMLEtBQUssQ0FBQ00sVUFBVSxDQUFDSCxDQUFDLENBQUM7SUFHckMsSUFBSUUsU0FBUyxJQUFJLE1BQU0sSUFBSUEsU0FBUyxHQUFHLE1BQU0sRUFBRTtNQUM3QyxJQUFJQSxTQUFTLEdBQUcsTUFBTSxJQUFJRixDQUFDLEdBQUcsQ0FBQyxHQUFHSCxLQUFLLENBQUNJLE1BQU0sRUFBRTtRQUM5QyxJQUFNRyxJQUFJLEdBQUdQLEtBQUssQ0FBQ00sVUFBVSxDQUFDSCxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRXBDLElBQUlJLElBQUksSUFBSSxNQUFNLElBQUlBLElBQUksR0FBRyxNQUFNLEVBQUU7VUFDbkNMLEtBQUssSUFBSSxDQUFDO1VBQ1YsSUFBSUEsS0FBSyxHQUFHRCxLQUFLLEVBQUU7WUFDakIsT0FBTyxJQUFJO1VBQ2I7VUFDQUUsQ0FBQyxFQUFFO1VBQ0g7UUFDRjtNQUNGO0lBQ0Y7SUFFQUQsS0FBSyxJQUFJRyxTQUFTLEdBQUcsSUFBSSxHQUFHLENBQUMsR0FBR0EsU0FBUyxHQUFHLEtBQUssR0FBRyxDQUFDLEdBQUcsQ0FBQztJQUN6RCxJQUFJSCxLQUFLLEdBQUdELEtBQUssRUFBRTtNQUNqQixPQUFPLElBQUk7SUFDYjtFQUNGO0VBRUEsT0FBT0MsS0FBSyxHQUFHRCxLQUFLO0FBQ3RCIiwiaWdub3JlTGlzdCI6W119