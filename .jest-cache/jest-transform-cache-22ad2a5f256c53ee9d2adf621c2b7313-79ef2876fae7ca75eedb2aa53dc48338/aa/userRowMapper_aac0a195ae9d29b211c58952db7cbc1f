ace54a42aa0f33051389e04f3c109e15
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.buildUsersUpsertRow = buildUsersUpsertRow;
function buildUsersUpsertRow(authUser) {
  var _authUser$user_metada, _authUser$email, _authUser$app_metadat;
  var name = ((_authUser$user_metada = authUser.user_metadata) == null ? void 0 : _authUser$user_metada.name) || ((_authUser$email = authUser.email) == null ? void 0 : _authUser$email.split('@')[0]) || 'User';
  var provider = ((_authUser$app_metadat = authUser.app_metadata) == null ? void 0 : _authUser$app_metadat.provider) || 'email';
  return {
    id: authUser.id,
    email: authUser.email || '',
    name: name,
    provider: provider,
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString()
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJidWlsZFVzZXJzVXBzZXJ0Um93IiwiYXV0aFVzZXIiLCJfYXV0aFVzZXIkdXNlcl9tZXRhZGEiLCJfYXV0aFVzZXIkZW1haWwiLCJfYXV0aFVzZXIkYXBwX21ldGFkYXQiLCJuYW1lIiwidXNlcl9tZXRhZGF0YSIsImVtYWlsIiwic3BsaXQiLCJwcm92aWRlciIsImFwcF9tZXRhZGF0YSIsImlkIiwiY3JlYXRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInVwZGF0ZWRfYXQiXSwic291cmNlcyI6WyJ1c2VyUm93TWFwcGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgVXNlciB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZFVzZXJzVXBzZXJ0Um93KGF1dGhVc2VyOiBVc2VyKSB7XG4gIGNvbnN0IG5hbWUgPSBhdXRoVXNlci51c2VyX21ldGFkYXRhPy5uYW1lIHx8IGF1dGhVc2VyLmVtYWlsPy5zcGxpdCgnQCcpWzBdIHx8ICdVc2VyJztcbiAgY29uc3QgcHJvdmlkZXIgPSAoYXV0aFVzZXIuYXBwX21ldGFkYXRhIGFzIGFueSk/LnByb3ZpZGVyIHx8ICdlbWFpbCc7XG4gIHJldHVybiB7XG4gICAgaWQ6IGF1dGhVc2VyLmlkLFxuICAgIGVtYWlsOiBhdXRoVXNlci5lbWFpbCB8fCAnJyxcbiAgICBuYW1lLFxuICAgIHByb3ZpZGVyLFxuICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gIH07XG59XG5cbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUVPLFNBQVNBLG1CQUFtQkEsQ0FBQ0MsUUFBYyxFQUFFO0VBQUEsSUFBQUMscUJBQUEsRUFBQUMsZUFBQSxFQUFBQyxxQkFBQTtFQUNsRCxJQUFNQyxJQUFJLEdBQUcsRUFBQUgscUJBQUEsR0FBQUQsUUFBUSxDQUFDSyxhQUFhLHFCQUF0QkoscUJBQUEsQ0FBd0JHLElBQUksT0FBQUYsZUFBQSxHQUFJRixRQUFRLENBQUNNLEtBQUsscUJBQWRKLGVBQUEsQ0FBZ0JLLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSSxNQUFNO0VBQ3BGLElBQU1DLFFBQVEsR0FBRyxFQUFBTCxxQkFBQSxHQUFDSCxRQUFRLENBQUNTLFlBQVkscUJBQXRCTixxQkFBQSxDQUFnQ0ssUUFBUSxLQUFJLE9BQU87RUFDcEUsT0FBTztJQUNMRSxFQUFFLEVBQUVWLFFBQVEsQ0FBQ1UsRUFBRTtJQUNmSixLQUFLLEVBQUVOLFFBQVEsQ0FBQ00sS0FBSyxJQUFJLEVBQUU7SUFDM0JGLElBQUksRUFBSkEsSUFBSTtJQUNKSSxRQUFRLEVBQVJBLFFBQVE7SUFDUkcsVUFBVSxFQUFFLElBQUlDLElBQUksQ0FBQyxDQUFDLENBQUNDLFdBQVcsQ0FBQyxDQUFDO0lBQ3BDQyxVQUFVLEVBQUUsSUFBSUYsSUFBSSxDQUFDLENBQUMsQ0FBQ0MsV0FBVyxDQUFDO0VBQ3JDLENBQUM7QUFDSCIsImlnbm9yZUxpc3QiOltdfQ==