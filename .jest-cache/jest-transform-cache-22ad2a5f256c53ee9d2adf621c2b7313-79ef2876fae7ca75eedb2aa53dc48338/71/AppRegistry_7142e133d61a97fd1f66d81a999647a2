097bd86411b61e85dafa6871af1378e1
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _BugReporting = _interopRequireDefault(require("../BugReporting/BugReporting"));
var _registerCallableModule = _interopRequireDefault(require("../Core/registerCallableModule"));
var _createPerformanceLogger = _interopRequireDefault(require("../Utilities/createPerformanceLogger"));
var _infoLog = _interopRequireDefault(require("../Utilities/infoLog"));
var _SceneTracker = _interopRequireDefault(require("../Utilities/SceneTracker"));
var _DisplayMode = require("./DisplayMode");
var _HeadlessJsTaskError = _interopRequireDefault(require("./HeadlessJsTaskError"));
var _NativeHeadlessJsTaskSupport = _interopRequireDefault(require("./NativeHeadlessJsTaskSupport"));
var _renderApplication = _interopRequireDefault(require("./renderApplication"));
var _RendererProxy = require("./RendererProxy");
var _invariant = _interopRequireDefault(require("invariant"));
var runnables = {};
var runCount = 1;
var sections = {};
var taskProviders = new Map();
var taskCancelProviders = new Map();
var componentProviderInstrumentationHook = function componentProviderInstrumentationHook(component) {
  return component();
};
var wrapperComponentProvider;
var rootViewStyleProvider;
var AppRegistry = {
  setWrapperComponentProvider: function setWrapperComponentProvider(provider) {
    wrapperComponentProvider = provider;
  },
  setRootViewStyleProvider: function setRootViewStyleProvider(provider) {
    rootViewStyleProvider = provider;
  },
  registerConfig: function registerConfig(config) {
    config.forEach(function (appConfig) {
      if (appConfig.run) {
        AppRegistry.registerRunnable(appConfig.appKey, appConfig.run);
      } else {
        (0, _invariant.default)(appConfig.component != null, 'AppRegistry.registerConfig(...): Every config is expected to set ' + 'either `run` or `component`, but `%s` has neither.', appConfig.appKey);
        AppRegistry.registerComponent(appConfig.appKey, appConfig.component, appConfig.section);
      }
    });
  },
  registerComponent: function registerComponent(appKey, componentProvider, section) {
    var scopedPerformanceLogger = (0, _createPerformanceLogger.default)();
    runnables[appKey] = function (appParameters, displayMode) {
      (0, _renderApplication.default)(componentProviderInstrumentationHook(componentProvider, scopedPerformanceLogger), appParameters.initialProps, appParameters.rootTag, wrapperComponentProvider && wrapperComponentProvider(appParameters), rootViewStyleProvider && rootViewStyleProvider(appParameters), appParameters.fabric, scopedPerformanceLogger, appKey === 'LogBox', appKey, displayMode);
    };
    if (section) {
      sections[appKey] = runnables[appKey];
    }
    return appKey;
  },
  registerRunnable: function registerRunnable(appKey, run) {
    runnables[appKey] = run;
    return appKey;
  },
  registerSection: function registerSection(appKey, component) {
    AppRegistry.registerComponent(appKey, component, true);
  },
  getAppKeys: function getAppKeys() {
    return Object.keys(runnables);
  },
  getSectionKeys: function getSectionKeys() {
    return Object.keys(sections);
  },
  getSections: function getSections() {
    return Object.assign({}, sections);
  },
  getRunnable: function getRunnable(appKey) {
    return runnables[appKey];
  },
  getRegistry: function getRegistry() {
    return {
      sections: AppRegistry.getSectionKeys(),
      runnables: Object.assign({}, runnables)
    };
  },
  setComponentProviderInstrumentationHook: function setComponentProviderInstrumentationHook(hook) {
    componentProviderInstrumentationHook = hook;
  },
  runApplication: function runApplication(appKey, appParameters, displayMode) {
    if (appKey !== 'LogBox') {
      var logParams = __DEV__ ? ` with ${JSON.stringify(appParameters)}` : '';
      var msg = `Running "${appKey}"${logParams}`;
      (0, _infoLog.default)(msg);
      _BugReporting.default.addSource('AppRegistry.runApplication' + runCount++, function () {
        return msg;
      });
    }
    (0, _invariant.default)(runnables[appKey], `"${appKey}" has not been registered. This can happen if:\n` + '* Metro (the local dev server) is run from the wrong folder. ' + 'Check if Metro is running, stop it and restart it in the current project.\n' + "* A module failed to load due to an error and `AppRegistry.registerComponent` wasn't called.");
    _SceneTracker.default.setActiveScene({
      name: appKey
    });
    runnables[appKey](appParameters, (0, _DisplayMode.coerceDisplayMode)(displayMode));
  },
  setSurfaceProps: function setSurfaceProps(appKey, appParameters, displayMode) {
    if (appKey !== 'LogBox') {
      var msg = 'Updating props for Surface "' + appKey + '" with ' + JSON.stringify(appParameters);
      (0, _infoLog.default)(msg);
      _BugReporting.default.addSource('AppRegistry.setSurfaceProps' + runCount++, function () {
        return msg;
      });
    }
    (0, _invariant.default)(runnables[appKey], `"${appKey}" has not been registered. This can happen if:\n` + '* Metro (the local dev server) is run from the wrong folder. ' + 'Check if Metro is running, stop it and restart it in the current project.\n' + "* A module failed to load due to an error and `AppRegistry.registerComponent` wasn't called.");
    runnables[appKey](appParameters, (0, _DisplayMode.coerceDisplayMode)(displayMode));
  },
  unmountApplicationComponentAtRootTag: function unmountApplicationComponentAtRootTag(rootTag) {
    (0, _RendererProxy.unmountComponentAtNodeAndRemoveContainer)(rootTag);
  },
  registerHeadlessTask: function registerHeadlessTask(taskKey, taskProvider) {
    this.registerCancellableHeadlessTask(taskKey, taskProvider, function () {
      return function () {};
    });
  },
  registerCancellableHeadlessTask: function registerCancellableHeadlessTask(taskKey, taskProvider, taskCancelProvider) {
    if (taskProviders.has(taskKey)) {
      console.warn(`registerHeadlessTask or registerCancellableHeadlessTask called multiple times for same key '${taskKey}'`);
    }
    taskProviders.set(taskKey, taskProvider);
    taskCancelProviders.set(taskKey, taskCancelProvider);
  },
  startHeadlessTask: function startHeadlessTask(taskId, taskKey, data) {
    var taskProvider = taskProviders.get(taskKey);
    if (!taskProvider) {
      console.warn(`No task registered for key ${taskKey}`);
      if (_NativeHeadlessJsTaskSupport.default) {
        _NativeHeadlessJsTaskSupport.default.notifyTaskFinished(taskId);
      }
      return;
    }
    taskProvider()(data).then(function () {
      if (_NativeHeadlessJsTaskSupport.default) {
        _NativeHeadlessJsTaskSupport.default.notifyTaskFinished(taskId);
      }
    }).catch(function (reason) {
      console.error(reason);
      if (_NativeHeadlessJsTaskSupport.default && reason instanceof _HeadlessJsTaskError.default) {
        _NativeHeadlessJsTaskSupport.default.notifyTaskRetry(taskId).then(function (retryPosted) {
          if (!retryPosted) {
            _NativeHeadlessJsTaskSupport.default.notifyTaskFinished(taskId);
          }
        });
      }
    });
  },
  cancelHeadlessTask: function cancelHeadlessTask(taskId, taskKey) {
    var taskCancelProvider = taskCancelProviders.get(taskKey);
    if (!taskCancelProvider) {
      throw new Error(`No task canceller registered for key '${taskKey}'`);
    }
    taskCancelProvider()();
  }
};
AppRegistry.registerComponent('LogBox', function () {
  if (__DEV__ && typeof jest === 'undefined') {
    return require("../LogBox/LogBoxInspectorContainer").default;
  } else {
    return function NoOp() {
      return null;
    };
  }
});
global.RN$AppRegistry = AppRegistry;
global.RN$SurfaceRegistry = {
  renderSurface: AppRegistry.runApplication,
  setSurfaceProps: AppRegistry.setSurfaceProps
};
(0, _registerCallableModule.default)('AppRegistry', AppRegistry);
var _default = exports.default = AppRegistry;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfQnVnUmVwb3J0aW5nIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfcmVnaXN0ZXJDYWxsYWJsZU1vZHVsZSIsIl9jcmVhdGVQZXJmb3JtYW5jZUxvZ2dlciIsIl9pbmZvTG9nIiwiX1NjZW5lVHJhY2tlciIsIl9EaXNwbGF5TW9kZSIsIl9IZWFkbGVzc0pzVGFza0Vycm9yIiwiX05hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydCIsIl9yZW5kZXJBcHBsaWNhdGlvbiIsIl9SZW5kZXJlclByb3h5IiwiX2ludmFyaWFudCIsInJ1bm5hYmxlcyIsInJ1bkNvdW50Iiwic2VjdGlvbnMiLCJ0YXNrUHJvdmlkZXJzIiwiTWFwIiwidGFza0NhbmNlbFByb3ZpZGVycyIsImNvbXBvbmVudFByb3ZpZGVySW5zdHJ1bWVudGF0aW9uSG9vayIsImNvbXBvbmVudCIsIndyYXBwZXJDb21wb25lbnRQcm92aWRlciIsInJvb3RWaWV3U3R5bGVQcm92aWRlciIsIkFwcFJlZ2lzdHJ5Iiwic2V0V3JhcHBlckNvbXBvbmVudFByb3ZpZGVyIiwicHJvdmlkZXIiLCJzZXRSb290Vmlld1N0eWxlUHJvdmlkZXIiLCJyZWdpc3RlckNvbmZpZyIsImNvbmZpZyIsImZvckVhY2giLCJhcHBDb25maWciLCJydW4iLCJyZWdpc3RlclJ1bm5hYmxlIiwiYXBwS2V5IiwiaW52YXJpYW50IiwicmVnaXN0ZXJDb21wb25lbnQiLCJzZWN0aW9uIiwiY29tcG9uZW50UHJvdmlkZXIiLCJzY29wZWRQZXJmb3JtYW5jZUxvZ2dlciIsImNyZWF0ZVBlcmZvcm1hbmNlTG9nZ2VyIiwiYXBwUGFyYW1ldGVycyIsImRpc3BsYXlNb2RlIiwicmVuZGVyQXBwbGljYXRpb24iLCJpbml0aWFsUHJvcHMiLCJyb290VGFnIiwiZmFicmljIiwicmVnaXN0ZXJTZWN0aW9uIiwiZ2V0QXBwS2V5cyIsIk9iamVjdCIsImtleXMiLCJnZXRTZWN0aW9uS2V5cyIsImdldFNlY3Rpb25zIiwiYXNzaWduIiwiZ2V0UnVubmFibGUiLCJnZXRSZWdpc3RyeSIsInNldENvbXBvbmVudFByb3ZpZGVySW5zdHJ1bWVudGF0aW9uSG9vayIsImhvb2siLCJydW5BcHBsaWNhdGlvbiIsImxvZ1BhcmFtcyIsIl9fREVWX18iLCJKU09OIiwic3RyaW5naWZ5IiwibXNnIiwiaW5mb0xvZyIsIkJ1Z1JlcG9ydGluZyIsImFkZFNvdXJjZSIsIlNjZW5lVHJhY2tlciIsInNldEFjdGl2ZVNjZW5lIiwibmFtZSIsImNvZXJjZURpc3BsYXlNb2RlIiwic2V0U3VyZmFjZVByb3BzIiwidW5tb3VudEFwcGxpY2F0aW9uQ29tcG9uZW50QXRSb290VGFnIiwidW5tb3VudENvbXBvbmVudEF0Tm9kZUFuZFJlbW92ZUNvbnRhaW5lciIsInJlZ2lzdGVySGVhZGxlc3NUYXNrIiwidGFza0tleSIsInRhc2tQcm92aWRlciIsInJlZ2lzdGVyQ2FuY2VsbGFibGVIZWFkbGVzc1Rhc2siLCJ0YXNrQ2FuY2VsUHJvdmlkZXIiLCJoYXMiLCJjb25zb2xlIiwid2FybiIsInNldCIsInN0YXJ0SGVhZGxlc3NUYXNrIiwidGFza0lkIiwiZGF0YSIsImdldCIsIk5hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydCIsIm5vdGlmeVRhc2tGaW5pc2hlZCIsInRoZW4iLCJjYXRjaCIsInJlYXNvbiIsImVycm9yIiwiSGVhZGxlc3NKc1Rhc2tFcnJvciIsIm5vdGlmeVRhc2tSZXRyeSIsInJldHJ5UG9zdGVkIiwiY2FuY2VsSGVhZGxlc3NUYXNrIiwiRXJyb3IiLCJqZXN0IiwiZGVmYXVsdCIsIk5vT3AiLCJnbG9iYWwiLCJSTiRBcHBSZWdpc3RyeSIsIlJOJFN1cmZhY2VSZWdpc3RyeSIsInJlbmRlclN1cmZhY2UiLCJyZWdpc3RlckNhbGxhYmxlTW9kdWxlIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiQXBwUmVnaXN0cnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cblxuaW1wb3J0IHR5cGUge1ZpZXdTdHlsZVByb3B9IGZyb20gJy4uL1N0eWxlU2hlZXQvU3R5bGVTaGVldCc7XG5pbXBvcnQgdHlwZSB7Um9vdFRhZ30gZnJvbSAnLi4vVHlwZXMvUm9vdFRhZ1R5cGVzJztcbmltcG9ydCB0eXBlIHtJUGVyZm9ybWFuY2VMb2dnZXJ9IGZyb20gJy4uL1V0aWxpdGllcy9jcmVhdGVQZXJmb3JtYW5jZUxvZ2dlcic7XG5pbXBvcnQgdHlwZSB7RGlzcGxheU1vZGVUeXBlfSBmcm9tICcuL0Rpc3BsYXlNb2RlJztcblxuaW1wb3J0IEJ1Z1JlcG9ydGluZyBmcm9tICcuLi9CdWdSZXBvcnRpbmcvQnVnUmVwb3J0aW5nJztcbmltcG9ydCByZWdpc3RlckNhbGxhYmxlTW9kdWxlIGZyb20gJy4uL0NvcmUvcmVnaXN0ZXJDYWxsYWJsZU1vZHVsZSc7XG5pbXBvcnQgY3JlYXRlUGVyZm9ybWFuY2VMb2dnZXIgZnJvbSAnLi4vVXRpbGl0aWVzL2NyZWF0ZVBlcmZvcm1hbmNlTG9nZ2VyJztcbmltcG9ydCBpbmZvTG9nIGZyb20gJy4uL1V0aWxpdGllcy9pbmZvTG9nJztcbmltcG9ydCBTY2VuZVRyYWNrZXIgZnJvbSAnLi4vVXRpbGl0aWVzL1NjZW5lVHJhY2tlcic7XG5pbXBvcnQge2NvZXJjZURpc3BsYXlNb2RlfSBmcm9tICcuL0Rpc3BsYXlNb2RlJztcbmltcG9ydCBIZWFkbGVzc0pzVGFza0Vycm9yIGZyb20gJy4vSGVhZGxlc3NKc1Rhc2tFcnJvcic7XG5pbXBvcnQgTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0IGZyb20gJy4vTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0JztcbmltcG9ydCByZW5kZXJBcHBsaWNhdGlvbiBmcm9tICcuL3JlbmRlckFwcGxpY2F0aW9uJztcbmltcG9ydCB7dW5tb3VudENvbXBvbmVudEF0Tm9kZUFuZFJlbW92ZUNvbnRhaW5lcn0gZnJvbSAnLi9SZW5kZXJlclByb3h5JztcbmltcG9ydCBpbnZhcmlhbnQgZnJvbSAnaW52YXJpYW50JztcblxudHlwZSBUYXNrID0gKHRhc2tEYXRhOiBhbnkpID0+IFByb21pc2U8dm9pZD47XG5leHBvcnQgdHlwZSBUYXNrUHJvdmlkZXIgPSAoKSA9PiBUYXNrO1xudHlwZSBUYXNrQ2FuY2VsbGVyID0gKCkgPT4gdm9pZDtcbnR5cGUgVGFza0NhbmNlbFByb3ZpZGVyID0gKCkgPT4gVGFza0NhbmNlbGxlcjtcblxuZXhwb3J0IHR5cGUgQ29tcG9uZW50UHJvdmlkZXIgPSAoKSA9PiBSZWFjdC5Db21wb25lbnRUeXBlPGFueT47XG5leHBvcnQgdHlwZSBDb21wb25lbnRQcm92aWRlckluc3RydW1lbnRhdGlvbkhvb2sgPSAoXG4gIGNvbXBvbmVudF86IENvbXBvbmVudFByb3ZpZGVyLFxuICBzY29wZWRQZXJmb3JtYW5jZUxvZ2dlcjogSVBlcmZvcm1hbmNlTG9nZ2VyLFxuKSA9PiBSZWFjdC5Db21wb25lbnRUeXBlPGFueT47XG5leHBvcnQgdHlwZSBBcHBDb25maWcgPSB7XG4gIGFwcEtleTogc3RyaW5nLFxuICBjb21wb25lbnQ/OiBDb21wb25lbnRQcm92aWRlcixcbiAgcnVuPzogUnVubmFibGUsXG4gIHNlY3Rpb24/OiBib29sZWFuLFxuICAuLi5cbn07XG50eXBlIEFwcFBhcmFtZXRlcnMgPSB7XG4gIGluaXRpYWxQcm9wczogJFJlYWRPbmx5PHtbc3RyaW5nXTogbWl4ZWQsIC4uLn0+LFxuICByb290VGFnOiBSb290VGFnLFxuICBmYWJyaWM/OiBib29sZWFuLFxufTtcbmV4cG9ydCB0eXBlIFJ1bm5hYmxlID0gKFxuICBhcHBQYXJhbWV0ZXJzOiBBcHBQYXJhbWV0ZXJzLFxuICBkaXNwbGF5TW9kZTogRGlzcGxheU1vZGVUeXBlLFxuKSA9PiB2b2lkO1xuZXhwb3J0IHR5cGUgUnVubmFibGVzID0ge1thcHBLZXk6IHN0cmluZ106IFJ1bm5hYmxlfTtcbmV4cG9ydCB0eXBlIFJlZ2lzdHJ5ID0ge1xuICBzZWN0aW9uczogJFJlYWRPbmx5QXJyYXk8c3RyaW5nPixcbiAgcnVubmFibGVzOiBSdW5uYWJsZXMsXG4gIC4uLlxufTtcbmV4cG9ydCB0eXBlIFdyYXBwZXJDb21wb25lbnRQcm92aWRlciA9IChcbiAgYXBwUGFyYW1ldGVyczogT2JqZWN0LFxuKSA9PiBSZWFjdC5Db21wb25lbnRUeXBlPGFueT47XG5leHBvcnQgdHlwZSBSb290Vmlld1N0eWxlUHJvdmlkZXIgPSAoYXBwUGFyYW1ldGVyczogT2JqZWN0KSA9PiBWaWV3U3R5bGVQcm9wO1xuXG5jb25zdCBydW5uYWJsZXM6IFJ1bm5hYmxlcyA9IHt9O1xubGV0IHJ1bkNvdW50ID0gMTtcbmNvbnN0IHNlY3Rpb25zOiBSdW5uYWJsZXMgPSB7fTtcbmNvbnN0IHRhc2tQcm92aWRlcnM6IE1hcDxzdHJpbmcsIFRhc2tQcm92aWRlcj4gPSBuZXcgTWFwKCk7XG5jb25zdCB0YXNrQ2FuY2VsUHJvdmlkZXJzOiBNYXA8c3RyaW5nLCBUYXNrQ2FuY2VsUHJvdmlkZXI+ID0gbmV3IE1hcCgpO1xubGV0IGNvbXBvbmVudFByb3ZpZGVySW5zdHJ1bWVudGF0aW9uSG9vazogQ29tcG9uZW50UHJvdmlkZXJJbnN0cnVtZW50YXRpb25Ib29rID1cbiAgKGNvbXBvbmVudDogQ29tcG9uZW50UHJvdmlkZXIpID0+IGNvbXBvbmVudCgpO1xuXG5sZXQgd3JhcHBlckNvbXBvbmVudFByb3ZpZGVyOiA/V3JhcHBlckNvbXBvbmVudFByb3ZpZGVyO1xubGV0IHJvb3RWaWV3U3R5bGVQcm92aWRlcjogP1Jvb3RWaWV3U3R5bGVQcm92aWRlcjtcblxuLyoqXG4gKiBgQXBwUmVnaXN0cnlgIGlzIHRoZSBKYXZhU2NyaXB0IGVudHJ5IHBvaW50IHRvIHJ1bm5pbmcgYWxsIFJlYWN0IE5hdGl2ZSBhcHBzLlxuICpcbiAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FwcHJlZ2lzdHJ5XG4gKi9cbmNvbnN0IEFwcFJlZ2lzdHJ5ID0ge1xuICBzZXRXcmFwcGVyQ29tcG9uZW50UHJvdmlkZXIocHJvdmlkZXI6IFdyYXBwZXJDb21wb25lbnRQcm92aWRlcikge1xuICAgIHdyYXBwZXJDb21wb25lbnRQcm92aWRlciA9IHByb3ZpZGVyO1xuICB9LFxuXG4gIHNldFJvb3RWaWV3U3R5bGVQcm92aWRlcihwcm92aWRlcjogUm9vdFZpZXdTdHlsZVByb3ZpZGVyKSB7XG4gICAgcm9vdFZpZXdTdHlsZVByb3ZpZGVyID0gcHJvdmlkZXI7XG4gIH0sXG5cbiAgcmVnaXN0ZXJDb25maWcoY29uZmlnOiBBcnJheTxBcHBDb25maWc+KTogdm9pZCB7XG4gICAgY29uZmlnLmZvckVhY2goYXBwQ29uZmlnID0+IHtcbiAgICAgIGlmIChhcHBDb25maWcucnVuKSB7XG4gICAgICAgIEFwcFJlZ2lzdHJ5LnJlZ2lzdGVyUnVubmFibGUoYXBwQ29uZmlnLmFwcEtleSwgYXBwQ29uZmlnLnJ1bik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnZhcmlhbnQoXG4gICAgICAgICAgYXBwQ29uZmlnLmNvbXBvbmVudCAhPSBudWxsLFxuICAgICAgICAgICdBcHBSZWdpc3RyeS5yZWdpc3RlckNvbmZpZyguLi4pOiBFdmVyeSBjb25maWcgaXMgZXhwZWN0ZWQgdG8gc2V0ICcgK1xuICAgICAgICAgICAgJ2VpdGhlciBgcnVuYCBvciBgY29tcG9uZW50YCwgYnV0IGAlc2AgaGFzIG5laXRoZXIuJyxcbiAgICAgICAgICBhcHBDb25maWcuYXBwS2V5LFxuICAgICAgICApO1xuICAgICAgICBBcHBSZWdpc3RyeS5yZWdpc3RlckNvbXBvbmVudChcbiAgICAgICAgICBhcHBDb25maWcuYXBwS2V5LFxuICAgICAgICAgIGFwcENvbmZpZy5jb21wb25lbnQsXG4gICAgICAgICAgYXBwQ29uZmlnLnNlY3Rpb24sXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhbiBhcHAncyByb290IGNvbXBvbmVudC5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXBwcmVnaXN0cnkjcmVnaXN0ZXJjb21wb25lbnRcbiAgICovXG4gIHJlZ2lzdGVyQ29tcG9uZW50KFxuICAgIGFwcEtleTogc3RyaW5nLFxuICAgIGNvbXBvbmVudFByb3ZpZGVyOiBDb21wb25lbnRQcm92aWRlcixcbiAgICBzZWN0aW9uPzogYm9vbGVhbixcbiAgKTogc3RyaW5nIHtcbiAgICBjb25zdCBzY29wZWRQZXJmb3JtYW5jZUxvZ2dlciA9IGNyZWF0ZVBlcmZvcm1hbmNlTG9nZ2VyKCk7XG4gICAgcnVubmFibGVzW2FwcEtleV0gPSAoYXBwUGFyYW1ldGVycywgZGlzcGxheU1vZGUpID0+IHtcbiAgICAgIHJlbmRlckFwcGxpY2F0aW9uKFxuICAgICAgICBjb21wb25lbnRQcm92aWRlckluc3RydW1lbnRhdGlvbkhvb2soXG4gICAgICAgICAgY29tcG9uZW50UHJvdmlkZXIsXG4gICAgICAgICAgc2NvcGVkUGVyZm9ybWFuY2VMb2dnZXIsXG4gICAgICAgICksXG4gICAgICAgIGFwcFBhcmFtZXRlcnMuaW5pdGlhbFByb3BzLFxuICAgICAgICBhcHBQYXJhbWV0ZXJzLnJvb3RUYWcsXG4gICAgICAgIHdyYXBwZXJDb21wb25lbnRQcm92aWRlciAmJiB3cmFwcGVyQ29tcG9uZW50UHJvdmlkZXIoYXBwUGFyYW1ldGVycyksXG4gICAgICAgIHJvb3RWaWV3U3R5bGVQcm92aWRlciAmJiByb290Vmlld1N0eWxlUHJvdmlkZXIoYXBwUGFyYW1ldGVycyksXG4gICAgICAgIGFwcFBhcmFtZXRlcnMuZmFicmljLFxuICAgICAgICBzY29wZWRQZXJmb3JtYW5jZUxvZ2dlcixcbiAgICAgICAgYXBwS2V5ID09PSAnTG9nQm94JywgLy8gaXMgbG9nYm94XG4gICAgICAgIGFwcEtleSxcbiAgICAgICAgZGlzcGxheU1vZGUsXG4gICAgICApO1xuICAgIH07XG4gICAgaWYgKHNlY3Rpb24pIHtcbiAgICAgIHNlY3Rpb25zW2FwcEtleV0gPSBydW5uYWJsZXNbYXBwS2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIGFwcEtleTtcbiAgfSxcblxuICByZWdpc3RlclJ1bm5hYmxlKGFwcEtleTogc3RyaW5nLCBydW46IFJ1bm5hYmxlKTogc3RyaW5nIHtcbiAgICBydW5uYWJsZXNbYXBwS2V5XSA9IHJ1bjtcbiAgICByZXR1cm4gYXBwS2V5O1xuICB9LFxuXG4gIHJlZ2lzdGVyU2VjdGlvbihhcHBLZXk6IHN0cmluZywgY29tcG9uZW50OiBDb21wb25lbnRQcm92aWRlcik6IHZvaWQge1xuICAgIEFwcFJlZ2lzdHJ5LnJlZ2lzdGVyQ29tcG9uZW50KGFwcEtleSwgY29tcG9uZW50LCB0cnVlKTtcbiAgfSxcblxuICBnZXRBcHBLZXlzKCk6ICRSZWFkT25seUFycmF5PHN0cmluZz4ge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhydW5uYWJsZXMpO1xuICB9LFxuXG4gIGdldFNlY3Rpb25LZXlzKCk6ICRSZWFkT25seUFycmF5PHN0cmluZz4ge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhzZWN0aW9ucyk7XG4gIH0sXG5cbiAgZ2V0U2VjdGlvbnMoKTogUnVubmFibGVzIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc2VjdGlvbnMsXG4gICAgfTtcbiAgfSxcblxuICBnZXRSdW5uYWJsZShhcHBLZXk6IHN0cmluZyk6ID9SdW5uYWJsZSB7XG4gICAgcmV0dXJuIHJ1bm5hYmxlc1thcHBLZXldO1xuICB9LFxuXG4gIGdldFJlZ2lzdHJ5KCk6IFJlZ2lzdHJ5IHtcbiAgICByZXR1cm4ge1xuICAgICAgc2VjdGlvbnM6IEFwcFJlZ2lzdHJ5LmdldFNlY3Rpb25LZXlzKCksXG4gICAgICBydW5uYWJsZXM6IHsuLi5ydW5uYWJsZXN9LFxuICAgIH07XG4gIH0sXG5cbiAgc2V0Q29tcG9uZW50UHJvdmlkZXJJbnN0cnVtZW50YXRpb25Ib29rKFxuICAgIGhvb2s6IENvbXBvbmVudFByb3ZpZGVySW5zdHJ1bWVudGF0aW9uSG9vayxcbiAgKSB7XG4gICAgY29tcG9uZW50UHJvdmlkZXJJbnN0cnVtZW50YXRpb25Ib29rID0gaG9vaztcbiAgfSxcblxuICAvKipcbiAgICogTG9hZHMgdGhlIEphdmFTY3JpcHQgYnVuZGxlIGFuZCBydW5zIHRoZSBhcHAuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FwcHJlZ2lzdHJ5I3J1bmFwcGxpY2F0aW9uXG4gICAqL1xuICBydW5BcHBsaWNhdGlvbihcbiAgICBhcHBLZXk6IHN0cmluZyxcbiAgICBhcHBQYXJhbWV0ZXJzOiBBcHBQYXJhbWV0ZXJzLFxuICAgIGRpc3BsYXlNb2RlPzogbnVtYmVyLFxuICApOiB2b2lkIHtcbiAgICBpZiAoYXBwS2V5ICE9PSAnTG9nQm94Jykge1xuICAgICAgY29uc3QgbG9nUGFyYW1zID0gX19ERVZfXyA/IGAgd2l0aCAke0pTT04uc3RyaW5naWZ5KGFwcFBhcmFtZXRlcnMpfWAgOiAnJztcbiAgICAgIGNvbnN0IG1zZyA9IGBSdW5uaW5nIFwiJHthcHBLZXl9XCIke2xvZ1BhcmFtc31gO1xuICAgICAgaW5mb0xvZyhtc2cpO1xuICAgICAgQnVnUmVwb3J0aW5nLmFkZFNvdXJjZShcbiAgICAgICAgJ0FwcFJlZ2lzdHJ5LnJ1bkFwcGxpY2F0aW9uJyArIHJ1bkNvdW50KyssXG4gICAgICAgICgpID0+IG1zZyxcbiAgICAgICk7XG4gICAgfVxuICAgIGludmFyaWFudChcbiAgICAgIHJ1bm5hYmxlc1thcHBLZXldLFxuICAgICAgYFwiJHthcHBLZXl9XCIgaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQuIFRoaXMgY2FuIGhhcHBlbiBpZjpcXG5gICtcbiAgICAgICAgJyogTWV0cm8gKHRoZSBsb2NhbCBkZXYgc2VydmVyKSBpcyBydW4gZnJvbSB0aGUgd3JvbmcgZm9sZGVyLiAnICtcbiAgICAgICAgJ0NoZWNrIGlmIE1ldHJvIGlzIHJ1bm5pbmcsIHN0b3AgaXQgYW5kIHJlc3RhcnQgaXQgaW4gdGhlIGN1cnJlbnQgcHJvamVjdC5cXG4nICtcbiAgICAgICAgXCIqIEEgbW9kdWxlIGZhaWxlZCB0byBsb2FkIGR1ZSB0byBhbiBlcnJvciBhbmQgYEFwcFJlZ2lzdHJ5LnJlZ2lzdGVyQ29tcG9uZW50YCB3YXNuJ3QgY2FsbGVkLlwiLFxuICAgICk7XG5cbiAgICBTY2VuZVRyYWNrZXIuc2V0QWN0aXZlU2NlbmUoe25hbWU6IGFwcEtleX0pO1xuICAgIHJ1bm5hYmxlc1thcHBLZXldKGFwcFBhcmFtZXRlcnMsIGNvZXJjZURpc3BsYXlNb2RlKGRpc3BsYXlNb2RlKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBpbml0aWFsIHByb3BzIGZvciBhIHN1cmZhY2UgdGhhdCdzIGFscmVhZHkgcmVuZGVyZWRcbiAgICovXG4gIHNldFN1cmZhY2VQcm9wcyhcbiAgICBhcHBLZXk6IHN0cmluZyxcbiAgICBhcHBQYXJhbWV0ZXJzOiBPYmplY3QsXG4gICAgZGlzcGxheU1vZGU/OiBudW1iZXIsXG4gICk6IHZvaWQge1xuICAgIGlmIChhcHBLZXkgIT09ICdMb2dCb3gnKSB7XG4gICAgICBjb25zdCBtc2cgPVxuICAgICAgICAnVXBkYXRpbmcgcHJvcHMgZm9yIFN1cmZhY2UgXCInICtcbiAgICAgICAgYXBwS2V5ICtcbiAgICAgICAgJ1wiIHdpdGggJyArXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KGFwcFBhcmFtZXRlcnMpO1xuICAgICAgaW5mb0xvZyhtc2cpO1xuICAgICAgQnVnUmVwb3J0aW5nLmFkZFNvdXJjZShcbiAgICAgICAgJ0FwcFJlZ2lzdHJ5LnNldFN1cmZhY2VQcm9wcycgKyBydW5Db3VudCsrLFxuICAgICAgICAoKSA9PiBtc2csXG4gICAgICApO1xuICAgIH1cbiAgICBpbnZhcmlhbnQoXG4gICAgICBydW5uYWJsZXNbYXBwS2V5XSxcbiAgICAgIGBcIiR7YXBwS2V5fVwiIGhhcyBub3QgYmVlbiByZWdpc3RlcmVkLiBUaGlzIGNhbiBoYXBwZW4gaWY6XFxuYCArXG4gICAgICAgICcqIE1ldHJvICh0aGUgbG9jYWwgZGV2IHNlcnZlcikgaXMgcnVuIGZyb20gdGhlIHdyb25nIGZvbGRlci4gJyArXG4gICAgICAgICdDaGVjayBpZiBNZXRybyBpcyBydW5uaW5nLCBzdG9wIGl0IGFuZCByZXN0YXJ0IGl0IGluIHRoZSBjdXJyZW50IHByb2plY3QuXFxuJyArXG4gICAgICAgIFwiKiBBIG1vZHVsZSBmYWlsZWQgdG8gbG9hZCBkdWUgdG8gYW4gZXJyb3IgYW5kIGBBcHBSZWdpc3RyeS5yZWdpc3RlckNvbXBvbmVudGAgd2Fzbid0IGNhbGxlZC5cIixcbiAgICApO1xuXG4gICAgcnVubmFibGVzW2FwcEtleV0oYXBwUGFyYW1ldGVycywgY29lcmNlRGlzcGxheU1vZGUoZGlzcGxheU1vZGUpKTtcbiAgfSxcblxuICAvKipcbiAgICogU3RvcHMgYW4gYXBwbGljYXRpb24gd2hlbiBhIHZpZXcgc2hvdWxkIGJlIGRlc3Ryb3llZC5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXBwcmVnaXN0cnkjdW5tb3VudGFwcGxpY2F0aW9uY29tcG9uZW50YXRyb290dGFnXG4gICAqL1xuICB1bm1vdW50QXBwbGljYXRpb25Db21wb25lbnRBdFJvb3RUYWcocm9vdFRhZzogUm9vdFRhZyk6IHZvaWQge1xuICAgIHVubW91bnRDb21wb25lbnRBdE5vZGVBbmRSZW1vdmVDb250YWluZXIocm9vdFRhZyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgaGVhZGxlc3MgdGFzay4gQSBoZWFkbGVzcyB0YXNrIGlzIGEgYml0IG9mIGNvZGUgdGhhdCBydW5zIHdpdGhvdXQgYSBVSS5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXBwcmVnaXN0cnkjcmVnaXN0ZXJoZWFkbGVzc3Rhc2tcbiAgICovXG4gIHJlZ2lzdGVySGVhZGxlc3NUYXNrKHRhc2tLZXk6IHN0cmluZywgdGFza1Byb3ZpZGVyOiBUYXNrUHJvdmlkZXIpOiB2b2lkIHtcbiAgICAvLyAkRmxvd0ZpeE1lW29iamVjdC10aGlzLXJlZmVyZW5jZV1cbiAgICB0aGlzLnJlZ2lzdGVyQ2FuY2VsbGFibGVIZWFkbGVzc1Rhc2sodGFza0tleSwgdGFza1Byb3ZpZGVyLCAoKSA9PiAoKSA9PiB7XG4gICAgICAvKiBDYW5jZWwgaXMgbm8tb3AgKi9cbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBjYW5jZWxsYWJsZSBoZWFkbGVzcyB0YXNrLiBBIGhlYWRsZXNzIHRhc2sgaXMgYSBiaXQgb2YgY29kZSB0aGF0IHJ1bnMgd2l0aG91dCBhIFVJLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hcHByZWdpc3RyeSNyZWdpc3RlcmNhbmNlbGxhYmxlaGVhZGxlc3N0YXNrXG4gICAqL1xuICByZWdpc3RlckNhbmNlbGxhYmxlSGVhZGxlc3NUYXNrKFxuICAgIHRhc2tLZXk6IHN0cmluZyxcbiAgICB0YXNrUHJvdmlkZXI6IFRhc2tQcm92aWRlcixcbiAgICB0YXNrQ2FuY2VsUHJvdmlkZXI6IFRhc2tDYW5jZWxQcm92aWRlcixcbiAgKTogdm9pZCB7XG4gICAgaWYgKHRhc2tQcm92aWRlcnMuaGFzKHRhc2tLZXkpKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGByZWdpc3RlckhlYWRsZXNzVGFzayBvciByZWdpc3RlckNhbmNlbGxhYmxlSGVhZGxlc3NUYXNrIGNhbGxlZCBtdWx0aXBsZSB0aW1lcyBmb3Igc2FtZSBrZXkgJyR7dGFza0tleX0nYCxcbiAgICAgICk7XG4gICAgfVxuICAgIHRhc2tQcm92aWRlcnMuc2V0KHRhc2tLZXksIHRhc2tQcm92aWRlcik7XG4gICAgdGFza0NhbmNlbFByb3ZpZGVycy5zZXQodGFza0tleSwgdGFza0NhbmNlbFByb3ZpZGVyKTtcbiAgfSxcblxuICAvKipcbiAgICogT25seSBjYWxsZWQgZnJvbSBuYXRpdmUgY29kZS4gU3RhcnRzIGEgaGVhZGxlc3MgdGFzay5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXBwcmVnaXN0cnkjc3RhcnRoZWFkbGVzc3Rhc2tcbiAgICovXG4gIHN0YXJ0SGVhZGxlc3NUYXNrKHRhc2tJZDogbnVtYmVyLCB0YXNrS2V5OiBzdHJpbmcsIGRhdGE6IGFueSk6IHZvaWQge1xuICAgIGNvbnN0IHRhc2tQcm92aWRlciA9IHRhc2tQcm92aWRlcnMuZ2V0KHRhc2tLZXkpO1xuICAgIGlmICghdGFza1Byb3ZpZGVyKSB7XG4gICAgICBjb25zb2xlLndhcm4oYE5vIHRhc2sgcmVnaXN0ZXJlZCBmb3Iga2V5ICR7dGFza0tleX1gKTtcbiAgICAgIGlmIChOYXRpdmVIZWFkbGVzc0pzVGFza1N1cHBvcnQpIHtcbiAgICAgICAgTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0Lm5vdGlmeVRhc2tGaW5pc2hlZCh0YXNrSWQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0YXNrUHJvdmlkZXIoKShkYXRhKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBpZiAoTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0KSB7XG4gICAgICAgICAgTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0Lm5vdGlmeVRhc2tGaW5pc2hlZCh0YXNrSWQpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKHJlYXNvbiA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IocmVhc29uKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0ICYmXG4gICAgICAgICAgcmVhc29uIGluc3RhbmNlb2YgSGVhZGxlc3NKc1Rhc2tFcnJvclxuICAgICAgICApIHtcbiAgICAgICAgICAvLyAkRmxvd0ZpeE1lW3VudXNlZC1wcm9taXNlXVxuICAgICAgICAgIE5hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydC5ub3RpZnlUYXNrUmV0cnkodGFza0lkKS50aGVuKFxuICAgICAgICAgICAgcmV0cnlQb3N0ZWQgPT4ge1xuICAgICAgICAgICAgICBpZiAoIXJldHJ5UG9zdGVkKSB7XG4gICAgICAgICAgICAgICAgTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0Lm5vdGlmeVRhc2tGaW5pc2hlZCh0YXNrSWQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBPbmx5IGNhbGxlZCBmcm9tIG5hdGl2ZSBjb2RlLiBDYW5jZWxzIGEgaGVhZGxlc3MgdGFzay5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXBwcmVnaXN0cnkjY2FuY2VsaGVhZGxlc3N0YXNrXG4gICAqL1xuICBjYW5jZWxIZWFkbGVzc1Rhc2sodGFza0lkOiBudW1iZXIsIHRhc2tLZXk6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IHRhc2tDYW5jZWxQcm92aWRlciA9IHRhc2tDYW5jZWxQcm92aWRlcnMuZ2V0KHRhc2tLZXkpO1xuICAgIGlmICghdGFza0NhbmNlbFByb3ZpZGVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIHRhc2sgY2FuY2VsbGVyIHJlZ2lzdGVyZWQgZm9yIGtleSAnJHt0YXNrS2V5fSdgKTtcbiAgICB9XG4gICAgdGFza0NhbmNlbFByb3ZpZGVyKCkoKTtcbiAgfSxcbn07XG5cbi8vIFJlZ2lzdGVyIExvZ0JveCBhcyBhIGRlZmF1bHQgc3VyZmFjZVxuQXBwUmVnaXN0cnkucmVnaXN0ZXJDb21wb25lbnQoJ0xvZ0JveCcsICgpID0+IHtcbiAgaWYgKF9fREVWX18gJiYgdHlwZW9mIGplc3QgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIHJlcXVpcmUoJy4uL0xvZ0JveC9Mb2dCb3hJbnNwZWN0b3JDb250YWluZXInKS5kZWZhdWx0O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmdW5jdGlvbiBOb09wKCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgfVxufSk7XG5cbmdsb2JhbC5STiRBcHBSZWdpc3RyeSA9IEFwcFJlZ2lzdHJ5O1xuXG4vLyBCYWNrd2FyZHMgY29tcGF0IHdpdGggU3VyZmFjZVJlZ2lzdHJ5LCByZW1vdmUgbWUgbGF0ZXJcbmdsb2JhbC5STiRTdXJmYWNlUmVnaXN0cnkgPSB7XG4gIHJlbmRlclN1cmZhY2U6IEFwcFJlZ2lzdHJ5LnJ1bkFwcGxpY2F0aW9uLFxuICBzZXRTdXJmYWNlUHJvcHM6IEFwcFJlZ2lzdHJ5LnNldFN1cmZhY2VQcm9wcyxcbn07XG5cbnJlZ2lzdGVyQ2FsbGFibGVNb2R1bGUoJ0FwcFJlZ2lzdHJ5JywgQXBwUmVnaXN0cnkpO1xuXG5leHBvcnQgZGVmYXVsdCBBcHBSZWdpc3RyeTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFlQSxJQUFBQSxhQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyx1QkFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsd0JBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLFFBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLGFBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFLLFlBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLG9CQUFBLEdBQUFQLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBTyw0QkFBQSxHQUFBUixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQVEsa0JBQUEsR0FBQVQsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFTLGNBQUEsR0FBQVQsT0FBQTtBQUNBLElBQUFVLFVBQUEsR0FBQVgsc0JBQUEsQ0FBQUMsT0FBQTtBQXVDQSxJQUFNVyxT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