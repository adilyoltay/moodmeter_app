2f10a2714e71797f55f63389e5d62eae
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault2(require("@babel/runtime/helpers/asyncToGenerator"));
var _objectWithoutProperties2 = _interopRequireDefault2(require("@babel/runtime/helpers/objectWithoutProperties"));
var _excluded = ["wrapper", "concurrentRoot", "unstable_validateStringsRenderedWithinText"],
  _excluded2 = ["wrapper"];
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = render;
exports.renderInternal = renderInternal;
var React = _interopRequireWildcard(require("react"));
var _act = _interopRequireDefault(require("./act"));
var _cleanup = require("./cleanup");
var _config = require("./config");
var _componentTree = require("./helpers/component-tree");
var _debug = require("./helpers/debug");
var _stringValidation = require("./helpers/string-validation");
var _renderAct = require("./render-act");
var _screen = require("./screen");
var _within = require("./within");
function _interopRequireDefault(e) {
  return e && e.__esModule ? e : {
    default: e
  };
}
function _interopRequireWildcard(e, t) {
  if ("function" == typeof WeakMap) var r = new WeakMap(),
    n = new WeakMap();
  return (_interopRequireWildcard = function _interopRequireWildcard(e, t) {
    if (!t && e && e.__esModule) return e;
    var o,
      i,
      f = {
        __proto__: null,
        default: e
      };
    if (null === e || "object" != typeof e && "function" != typeof e) return f;
    if (o = t ? n : r) {
      if (o.has(e)) return o.get(e);
      o.set(e, f);
    }
    for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]);
    return f;
  })(e, t);
}
function render(component) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return renderInternal(component, options);
}
function renderInternal(component, options) {
  var _ref = options || {},
    Wrapper = _ref.wrapper,
    concurrentRoot = _ref.concurrentRoot,
    unstable_validateStringsRenderedWithinText = _ref.unstable_validateStringsRenderedWithinText,
    rest = (0, _objectWithoutProperties2.default)(_ref, _excluded);
  var testRendererOptions = Object.assign({}, rest, {
    unstable_isConcurrent: concurrentRoot != null ? concurrentRoot : (0, _config.getConfig)().concurrentRoot
  });
  if (unstable_validateStringsRenderedWithinText) {
    return renderWithStringValidation(component, Object.assign({
      wrapper: Wrapper
    }, testRendererOptions));
  }
  var wrap = function wrap(element) {
    return Wrapper ? React.createElement(Wrapper, null, element) : element;
  };
  var renderer = (0, _renderAct.renderWithAct)(wrap(component), testRendererOptions);
  return buildRenderResult(renderer, wrap);
}
function renderWithStringValidation(component) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var _ref2 = options != null ? options : {},
    Wrapper = _ref2.wrapper,
    testRendererOptions = (0, _objectWithoutProperties2.default)(_ref2, _excluded2);
  var wrap = function wrap(element) {
    return React.createElement(React.Profiler, {
      id: "renderProfiler",
      onRender: handleRender
    }, Wrapper ? React.createElement(Wrapper, null, element) : element);
  };
  var handleRender = function handleRender(_, phase) {
    if (renderer && phase === 'update') {
      (0, _stringValidation.validateStringsRenderedWithinText)(renderer.toJSON());
    }
  };
  var renderer = (0, _renderAct.renderWithAct)(wrap(component), testRendererOptions);
  (0, _stringValidation.validateStringsRenderedWithinText)(renderer.toJSON());
  return buildRenderResult(renderer, wrap);
}
function buildRenderResult(renderer, wrap) {
  var instance = renderer.root;
  var rerender = function rerender(component) {
    void (0, _act.default)(function () {
      renderer.update(wrap(component));
    });
  };
  var rerenderAsync = function () {
    var _ref3 = (0, _asyncToGenerator2.default)(function* (component) {
      yield (0, _act.default)((0, _asyncToGenerator2.default)(function* () {
        renderer.update(wrap(component));
      }));
    });
    return function rerenderAsync(_x) {
      return _ref3.apply(this, arguments);
    };
  }();
  var unmount = function unmount() {
    void (0, _act.default)(function () {
      renderer.unmount();
    });
  };
  var unmountAsync = function () {
    var _ref5 = (0, _asyncToGenerator2.default)(function* () {
      yield (0, _act.default)((0, _asyncToGenerator2.default)(function* () {
        renderer.unmount();
      }));
    });
    return function unmountAsync() {
      return _ref5.apply(this, arguments);
    };
  }();
  (0, _cleanup.addToCleanupQueue)(unmount);
  var result = Object.assign({}, (0, _within.getQueriesForElement)(instance), {
    rerender: rerender,
    rerenderAsync: rerenderAsync,
    update: rerender,
    updateAsync: rerenderAsync,
    unmount: unmount,
    unmountAsync: unmountAsync,
    toJSON: renderer.toJSON,
    debug: makeDebug(renderer),
    get root() {
      return (0, _componentTree.getHostSelves)(instance)[0];
    },
    UNSAFE_root: instance
  });
  Object.defineProperty(result, 'container', {
    enumerable: false,
    get: function get() {
      throw new Error("'container' property has been renamed to 'UNSAFE_root'.\n\n" + "Consider using 'root' property which returns root host element.");
    }
  });
  (0, _screen.setRenderResult)(result);
  return result;
}
function makeDebug(renderer) {
  function debugImpl(options) {
    var _ref7 = (0, _config.getConfig)(),
      defaultDebugOptions = _ref7.defaultDebugOptions;
    var debugOptions = Object.assign({}, defaultDebugOptions, options);
    var json = renderer.toJSON();
    if (json) {
      return (0, _debug.debug)(json, debugOptions);
    }
  }
  return debugImpl;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9hY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX2NsZWFudXAiLCJfY29uZmlnIiwiX2NvbXBvbmVudFRyZWUiLCJfZGVidWciLCJfc3RyaW5nVmFsaWRhdGlvbiIsIl9yZW5kZXJBY3QiLCJfc2NyZWVuIiwiX3dpdGhpbiIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJvIiwiaSIsImYiLCJfX3Byb3RvX18iLCJoYXMiLCJnZXQiLCJzZXQiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInJlbmRlciIsImNvbXBvbmVudCIsIm9wdGlvbnMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJyZW5kZXJJbnRlcm5hbCIsIl9yZWYiLCJXcmFwcGVyIiwid3JhcHBlciIsImNvbmN1cnJlbnRSb290IiwidW5zdGFibGVfdmFsaWRhdGVTdHJpbmdzUmVuZGVyZWRXaXRoaW5UZXh0IiwicmVzdCIsIl9vYmplY3RXaXRob3V0UHJvcGVydGllczIiLCJfZXhjbHVkZWQiLCJ0ZXN0UmVuZGVyZXJPcHRpb25zIiwiYXNzaWduIiwidW5zdGFibGVfaXNDb25jdXJyZW50IiwiZ2V0Q29uZmlnIiwicmVuZGVyV2l0aFN0cmluZ1ZhbGlkYXRpb24iLCJ3cmFwIiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJyZW5kZXJlciIsInJlbmRlcldpdGhBY3QiLCJidWlsZFJlbmRlclJlc3VsdCIsIl9yZWYyIiwiX2V4Y2x1ZGVkMiIsIlByb2ZpbGVyIiwiaWQiLCJvblJlbmRlciIsImhhbmRsZVJlbmRlciIsIl8iLCJwaGFzZSIsInZhbGlkYXRlU3RyaW5nc1JlbmRlcmVkV2l0aGluVGV4dCIsInRvSlNPTiIsImluc3RhbmNlIiwicm9vdCIsInJlcmVuZGVyIiwidXBkYXRlIiwicmVyZW5kZXJBc3luYyIsIl9yZWYzIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiX3giLCJhcHBseSIsInVubW91bnQiLCJ1bm1vdW50QXN5bmMiLCJfcmVmNSIsImFkZFRvQ2xlYW51cFF1ZXVlIiwicmVzdWx0IiwiZ2V0UXVlcmllc0ZvckVsZW1lbnQiLCJ1cGRhdGVBc3luYyIsImRlYnVnIiwibWFrZURlYnVnIiwiZ2V0SG9zdFNlbHZlcyIsIlVOU0FGRV9yb290IiwiZW51bWVyYWJsZSIsIkVycm9yIiwic2V0UmVuZGVyUmVzdWx0IiwiZGVidWdJbXBsIiwiX3JlZjciLCJkZWZhdWx0RGVidWdPcHRpb25zIiwiZGVidWdPcHRpb25zIiwianNvbiJdLCJzb3VyY2VzIjpbIi4uL3NyYy9yZW5kZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB0eXBlIHtcbiAgUmVhY3RUZXN0SW5zdGFuY2UsXG4gIFJlYWN0VGVzdFJlbmRlcmVyLFxuICBUZXN0UmVuZGVyZXJPcHRpb25zLFxufSBmcm9tICdyZWFjdC10ZXN0LXJlbmRlcmVyJztcblxuaW1wb3J0IGFjdCBmcm9tICcuL2FjdCc7XG5pbXBvcnQgeyBhZGRUb0NsZWFudXBRdWV1ZSB9IGZyb20gJy4vY2xlYW51cCc7XG5pbXBvcnQgeyBnZXRDb25maWcgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgeyBnZXRIb3N0U2VsdmVzIH0gZnJvbSAnLi9oZWxwZXJzL2NvbXBvbmVudC10cmVlJztcbmltcG9ydCB0eXBlIHsgRGVidWdPcHRpb25zIH0gZnJvbSAnLi9oZWxwZXJzL2RlYnVnJztcbmltcG9ydCB7IGRlYnVnIH0gZnJvbSAnLi9oZWxwZXJzL2RlYnVnJztcbmltcG9ydCB7IHZhbGlkYXRlU3RyaW5nc1JlbmRlcmVkV2l0aGluVGV4dCB9IGZyb20gJy4vaGVscGVycy9zdHJpbmctdmFsaWRhdGlvbic7XG5pbXBvcnQgeyByZW5kZXJXaXRoQWN0IH0gZnJvbSAnLi9yZW5kZXItYWN0JztcbmltcG9ydCB7IHNldFJlbmRlclJlc3VsdCB9IGZyb20gJy4vc2NyZWVuJztcbmltcG9ydCB7IGdldFF1ZXJpZXNGb3JFbGVtZW50IH0gZnJvbSAnLi93aXRoaW4nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlbmRlck9wdGlvbnMge1xuICAvKipcbiAgICogUGFzcyBhIFJlYWN0IENvbXBvbmVudCBhcyB0aGUgd3JhcHBlciBvcHRpb24gdG8gaGF2ZSBpdCByZW5kZXJlZCBhcm91bmQgdGhlIGlubmVyIGVsZW1lbnQuIFRoaXMgaXMgbW9zdCB1c2VmdWwgZm9yIGNyZWF0aW5nXG4gICAqIHJldXNhYmxlIGN1c3RvbSByZW5kZXIgZnVuY3Rpb25zIGZvciBjb21tb24gZGF0YSBwcm92aWRlcnMuXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICB3cmFwcGVyPzogUmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+O1xuXG4gIC8qKlxuICAgKiBTZXQgdG8gYGZhbHNlYCB0byBkaXNhYmxlIGNvbmN1cnJlbnQgcmVuZGVyaW5nLlxuICAgKiBPdGhlcndpc2UgYHJlbmRlcmAgd2lsbCBkZWZhdWx0IHRvIGNvbmN1cnJlbnQgcmVuZGVyaW5nLlxuICAgKi9cbiAgY29uY3VycmVudFJvb3Q/OiBib29sZWFuO1xuXG4gIGNyZWF0ZU5vZGVNb2NrPzogKGVsZW1lbnQ6IFJlYWN0LlJlYWN0RWxlbWVudCkgPT4gdW5rbm93bjtcbiAgdW5zdGFibGVfdmFsaWRhdGVTdHJpbmdzUmVuZGVyZWRXaXRoaW5UZXh0PzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IHR5cGUgUmVuZGVyUmVzdWx0ID0gUmV0dXJuVHlwZTx0eXBlb2YgcmVuZGVyPjtcblxuLyoqXG4gKiBSZW5kZXJzIHRlc3QgY29tcG9uZW50IGRlZXBseSB1c2luZyBSZWFjdCBUZXN0IFJlbmRlcmVyIGFuZCBleHBvc2VzIGhlbHBlcnNcbiAqIHRvIGFzc2VydCBvbiB0aGUgb3V0cHV0LlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZW5kZXI8VD4oY29tcG9uZW50OiBSZWFjdC5SZWFjdEVsZW1lbnQ8VD4sIG9wdGlvbnM6IFJlbmRlck9wdGlvbnMgPSB7fSkge1xuICByZXR1cm4gcmVuZGVySW50ZXJuYWwoY29tcG9uZW50LCBvcHRpb25zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckludGVybmFsPFQ+KGNvbXBvbmVudDogUmVhY3QuUmVhY3RFbGVtZW50PFQ+LCBvcHRpb25zPzogUmVuZGVyT3B0aW9ucykge1xuICBjb25zdCB7XG4gICAgd3JhcHBlcjogV3JhcHBlcixcbiAgICBjb25jdXJyZW50Um9vdCxcbiAgICB1bnN0YWJsZV92YWxpZGF0ZVN0cmluZ3NSZW5kZXJlZFdpdGhpblRleHQsXG4gICAgLi4ucmVzdFxuICB9ID0gb3B0aW9ucyB8fCB7fTtcblxuICBjb25zdCB0ZXN0UmVuZGVyZXJPcHRpb25zOiBUZXN0UmVuZGVyZXJPcHRpb25zID0ge1xuICAgIC4uLnJlc3QsXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBpbmNvbXBsZXRlIHR5cGluZyBvbiBSVFIgcGFja2FnZVxuICAgIHVuc3RhYmxlX2lzQ29uY3VycmVudDogY29uY3VycmVudFJvb3QgPz8gZ2V0Q29uZmlnKCkuY29uY3VycmVudFJvb3QsXG4gIH07XG5cbiAgaWYgKHVuc3RhYmxlX3ZhbGlkYXRlU3RyaW5nc1JlbmRlcmVkV2l0aGluVGV4dCkge1xuICAgIHJldHVybiByZW5kZXJXaXRoU3RyaW5nVmFsaWRhdGlvbihjb21wb25lbnQsIHtcbiAgICAgIHdyYXBwZXI6IFdyYXBwZXIsXG4gICAgICAuLi50ZXN0UmVuZGVyZXJPcHRpb25zLFxuICAgIH0pO1xuICB9XG5cbiAgY29uc3Qgd3JhcCA9IChlbGVtZW50OiBSZWFjdC5SZWFjdEVsZW1lbnQpID0+IChXcmFwcGVyID8gPFdyYXBwZXI+e2VsZW1lbnR9PC9XcmFwcGVyPiA6IGVsZW1lbnQpO1xuICBjb25zdCByZW5kZXJlciA9IHJlbmRlcldpdGhBY3Qod3JhcChjb21wb25lbnQpLCB0ZXN0UmVuZGVyZXJPcHRpb25zKTtcbiAgcmV0dXJuIGJ1aWxkUmVuZGVyUmVzdWx0KHJlbmRlcmVyLCB3cmFwKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyV2l0aFN0cmluZ1ZhbGlkYXRpb248VD4oXG4gIGNvbXBvbmVudDogUmVhY3QuUmVhY3RFbGVtZW50PFQ+LFxuICBvcHRpb25zOiBPbWl0PFJlbmRlck9wdGlvbnMsICd1bnN0YWJsZV92YWxpZGF0ZVN0cmluZ3NSZW5kZXJlZFdpdGhpblRleHQnPiA9IHt9LFxuKSB7XG4gIGNvbnN0IHsgd3JhcHBlcjogV3JhcHBlciwgLi4udGVzdFJlbmRlcmVyT3B0aW9ucyB9ID0gb3B0aW9ucyA/PyB7fTtcblxuICBjb25zdCB3cmFwID0gKGVsZW1lbnQ6IFJlYWN0LlJlYWN0RWxlbWVudCkgPT4gKFxuICAgIDxSZWFjdC5Qcm9maWxlciBpZD1cInJlbmRlclByb2ZpbGVyXCIgb25SZW5kZXI9e2hhbmRsZVJlbmRlcn0+XG4gICAgICB7V3JhcHBlciA/IDxXcmFwcGVyPntlbGVtZW50fTwvV3JhcHBlcj4gOiBlbGVtZW50fVxuICAgIDwvUmVhY3QuUHJvZmlsZXI+XG4gICk7XG5cbiAgY29uc3QgaGFuZGxlUmVuZGVyOiBSZWFjdC5Qcm9maWxlck9uUmVuZGVyQ2FsbGJhY2sgPSAoXywgcGhhc2UpID0+IHtcbiAgICBpZiAocmVuZGVyZXIgJiYgcGhhc2UgPT09ICd1cGRhdGUnKSB7XG4gICAgICB2YWxpZGF0ZVN0cmluZ3NSZW5kZXJlZFdpdGhpblRleHQocmVuZGVyZXIudG9KU09OKCkpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCByZW5kZXJlcjogUmVhY3RUZXN0UmVuZGVyZXIgPSByZW5kZXJXaXRoQWN0KHdyYXAoY29tcG9uZW50KSwgdGVzdFJlbmRlcmVyT3B0aW9ucyk7XG4gIHZhbGlkYXRlU3RyaW5nc1JlbmRlcmVkV2l0aGluVGV4dChyZW5kZXJlci50b0pTT04oKSk7XG5cbiAgcmV0dXJuIGJ1aWxkUmVuZGVyUmVzdWx0KHJlbmRlcmVyLCB3cmFwKTtcbn1cblxuZnVuY3Rpb24gYnVpbGRSZW5kZXJSZXN1bHQoXG4gIHJlbmRlcmVyOiBSZWFjdFRlc3RSZW5kZXJlcixcbiAgd3JhcDogKGVsZW1lbnQ6IFJlYWN0LlJlYWN0RWxlbWVudCkgPT4gUmVhY3QuSlNYLkVsZW1lbnQsXG4pIHtcbiAgY29uc3QgaW5zdGFuY2UgPSByZW5kZXJlci5yb290O1xuXG4gIGNvbnN0IHJlcmVuZGVyID0gKGNvbXBvbmVudDogUmVhY3QuUmVhY3RFbGVtZW50KSA9PiB7XG4gICAgdm9pZCBhY3QoKCkgPT4ge1xuICAgICAgcmVuZGVyZXIudXBkYXRlKHdyYXAoY29tcG9uZW50KSk7XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IHJlcmVuZGVyQXN5bmMgPSBhc3luYyAoY29tcG9uZW50OiBSZWFjdC5SZWFjdEVsZW1lbnQpID0+IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS1hd2FpdFxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXJlci51cGRhdGUod3JhcChjb21wb25lbnQpKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCB1bm1vdW50ID0gKCkgPT4ge1xuICAgIHZvaWQgYWN0KCgpID0+IHtcbiAgICAgIHJlbmRlcmVyLnVubW91bnQoKTtcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgdW5tb3VudEFzeW5jID0gYXN5bmMgKCkgPT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZXF1aXJlLWF3YWl0XG4gICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcmVyLnVubW91bnQoKTtcbiAgICB9KTtcbiAgfTtcblxuICBhZGRUb0NsZWFudXBRdWV1ZSh1bm1vdW50KTtcblxuICBjb25zdCByZXN1bHQgPSB7XG4gICAgLi4uZ2V0UXVlcmllc0ZvckVsZW1lbnQoaW5zdGFuY2UpLFxuICAgIHJlcmVuZGVyLFxuICAgIHJlcmVuZGVyQXN5bmMsXG4gICAgdXBkYXRlOiByZXJlbmRlciwgLy8gYWxpYXMgZm9yICdyZXJlbmRlcidcbiAgICB1cGRhdGVBc3luYzogcmVyZW5kZXJBc3luYywgLy8gYWxpYXMgZm9yIGByZXJlbmRlckFzeW5jYFxuICAgIHVubW91bnQsXG4gICAgdW5tb3VudEFzeW5jLFxuICAgIHRvSlNPTjogcmVuZGVyZXIudG9KU09OLFxuICAgIGRlYnVnOiBtYWtlRGVidWcocmVuZGVyZXIpLFxuICAgIGdldCByb290KCk6IFJlYWN0VGVzdEluc3RhbmNlIHtcbiAgICAgIHJldHVybiBnZXRIb3N0U2VsdmVzKGluc3RhbmNlKVswXTtcbiAgICB9LFxuICAgIFVOU0FGRV9yb290OiBpbnN0YW5jZSxcbiAgfTtcblxuICAvLyBBZGQgYXMgbm9uLWVudW1lcmFibGUgcHJvcGVydHksIHNvIHRoYXQgaXQncyBzYWZlIHRvIGVudW1lcmF0ZVxuICAvLyBgcmVuZGVyYCByZXN1bHQsIGUuZy4gdXNpbmcgZGVzdHJ1Y3R1cmluZyByZXN0IHN5bnRheC5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlc3VsdCwgJ2NvbnRhaW5lcicsIHtcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBnZXQoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiJ2NvbnRhaW5lcicgcHJvcGVydHkgaGFzIGJlZW4gcmVuYW1lZCB0byAnVU5TQUZFX3Jvb3QnLlxcblxcblwiICtcbiAgICAgICAgICBcIkNvbnNpZGVyIHVzaW5nICdyb290JyBwcm9wZXJ0eSB3aGljaCByZXR1cm5zIHJvb3QgaG9zdCBlbGVtZW50LlwiLFxuICAgICAgKTtcbiAgICB9LFxuICB9KTtcblxuICBzZXRSZW5kZXJSZXN1bHQocmVzdWx0KTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgdHlwZSBEZWJ1Z0Z1bmN0aW9uID0gKG9wdGlvbnM/OiBEZWJ1Z09wdGlvbnMpID0+IHZvaWQ7XG5cbmZ1bmN0aW9uIG1ha2VEZWJ1ZyhyZW5kZXJlcjogUmVhY3RUZXN0UmVuZGVyZXIpOiBEZWJ1Z0Z1bmN0aW9uIHtcbiAgZnVuY3Rpb24gZGVidWdJbXBsKG9wdGlvbnM/OiBEZWJ1Z09wdGlvbnMpIHtcbiAgICBjb25zdCB7IGRlZmF1bHREZWJ1Z09wdGlvbnMgfSA9IGdldENvbmZpZygpO1xuICAgIGNvbnN0IGRlYnVnT3B0aW9ucyA9IHsgLi4uZGVmYXVsdERlYnVnT3B0aW9ucywgLi4ub3B0aW9ucyB9O1xuICAgIGNvbnN0IGpzb24gPSByZW5kZXJlci50b0pTT04oKTtcbiAgICBpZiAoanNvbikge1xuICAgICAgcmV0dXJuIGRlYnVnKGpzb24sIGRlYnVnT3B0aW9ucyk7XG4gICAgfVxuICB9XG4gIHJldHVybiBkZWJ1Z0ltcGw7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBLElBQUFBLEtBQUEsR0FBQUMsdUJBQUEsQ0FBQUMsT0FBQTtBQU9BLElBQUFDLElBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFHLFFBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLE9BQUEsR0FBQUosT0FBQTtBQUNBLElBQUFLLGNBQUEsR0FBQUwsT0FBQTtBQUVBLElBQUFNLE1BQUEsR0FBQU4sT0FBQTtBQUNBLElBQUFPLGlCQUFBLEdBQUFQLE9BQUE7QUFDQSxJQUFBUSxVQUFBLEdBQUFSLE9BQUE7QUFDQSxJQUFBUyxPQUFBLEdBQUFULE9BQUE7QUFDQSxJQUFBVSxPQUFBLEdBQUFWLE9BQUE7QUFBZ0QsU0FBQUUsdUJBQUFTLENBQUE7RUFBQSxPQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBO0lBQUFFLE9BQUEsRUFBQUY7RUFBQTtBQUFBO0FBQUEsU0FBQVosd0JBQUFZLENBQUEsRUFBQUcsQ0FBQTtFQUFBLHlCQUFBQyxPQUFBLE1BQUFDLENBQUEsT0FBQUQsT0FBQTtJQUFBRSxDQUFBLE9BQUFGLE9BQUE7RUFB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