{"version":3,"names":["_prettyFormat","_interopRequireDefault","require","_errors","e","__esModule","default","UNSAFE_getByProps","instance","getByPropsFn","props","findByProps","error","ErrorWithStack","prepareErrorMessage","UNSAFE_getAllByProps","getAllByPropsFn","results","findAllByProps","length","UNSAFE_queryByProps","queryByPropsFn","createQueryByError","UNSAFE_queryAllByProps","_unused","bindUnsafeByPropsQueries","exports"],"sources":["../../src/queries/unsafe-props.ts"],"sourcesContent":["import type { ReactTestInstance } from 'react-test-renderer';\nimport prettyFormat from 'pretty-format';\n\nimport { ErrorWithStack, prepareErrorMessage } from '../helpers/errors';\nimport { createQueryByError } from '../helpers/errors';\n\ntype Props = Record<string, unknown>;\n\nconst UNSAFE_getByProps = (instance: ReactTestInstance): ((props: Props) => ReactTestInstance) =>\n  function getByPropsFn(props: Props) {\n    try {\n      return instance.findByProps(props);\n    } catch (error) {\n      throw new ErrorWithStack(prepareErrorMessage(error), getByPropsFn);\n    }\n  };\n\nconst UNSAFE_getAllByProps = (\n  instance: ReactTestInstance,\n): ((props: Props) => Array<ReactTestInstance>) =>\n  function getAllByPropsFn(props: Props) {\n    const results = instance.findAllByProps(props);\n    if (results.length === 0) {\n      throw new ErrorWithStack(\n        `No instances found with props:\\n${prettyFormat(props)}`,\n        getAllByPropsFn,\n      );\n    }\n    return results;\n  };\n\nconst UNSAFE_queryByProps = (\n  instance: ReactTestInstance,\n): ((props: Props) => ReactTestInstance | null) =>\n  function queryByPropsFn(props: Props) {\n    try {\n      return UNSAFE_getByProps(instance)(props);\n    } catch (error) {\n      return createQueryByError(error, queryByPropsFn);\n    }\n  };\n\nconst UNSAFE_queryAllByProps =\n  (instance: ReactTestInstance): ((props: Props) => Array<ReactTestInstance>) =>\n  (props: Props) => {\n    try {\n      return UNSAFE_getAllByProps(instance)(props);\n    } catch {\n      return [];\n    }\n  };\n\n// Unsafe aliases\nexport type UnsafeByPropsQueries = {\n  UNSAFE_getByProps: (props: Props) => ReactTestInstance;\n  UNSAFE_getAllByProps: (props: Props) => Array<ReactTestInstance>;\n  UNSAFE_queryByProps: (props: Props) => ReactTestInstance | null;\n  UNSAFE_queryAllByProps: (props: Props) => Array<ReactTestInstance>;\n};\n\n// TODO: migrate to makeQueries pattern\nexport const bindUnsafeByPropsQueries = (instance: ReactTestInstance): UnsafeByPropsQueries => ({\n  UNSAFE_getByProps: UNSAFE_getByProps(instance),\n  UNSAFE_getAllByProps: UNSAFE_getAllByProps(instance),\n  UNSAFE_queryByProps: UNSAFE_queryByProps(instance),\n  UNSAFE_queryAllByProps: UNSAFE_queryAllByProps(instance),\n});\n"],"mappings":";;;;;;AACA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,IAAAC,OAAA,GAAAD,OAAA;AAAwE,SAAAD,uBAAAG,CAAA;EAAA,OAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA;IAAAE,OAAA,EAAAF;EAAA;AAAA;AAKxE,IAAMG,iBAAiB,GAAI,SAArBA,iBAAiBA,CAAIC,QAA2B;EAAA,OACpD,SAASC,YAAYA,CAACC,KAAY,EAAE;IAClC,IAAI;MACF,OAAOF,QAAQ,CAACG,WAAW,CAACD,KAAK,CAAC;IACpC,CAAC,CAAC,OAAOE,KAAK,EAAE;MACd,MAAM,IAAIT,OAAA,CAAAU,cAAc,CAAC,IAAAV,OAAA,CAAAW,mBAAmB,EAACF,KAAK,CAAC,EAAEH,YAAY,CAAC;IACpE;EACF,CAAC;AAAA;AAEH,IAAMM,oBAAoB,GACxB,SADIA,oBAAoBA,CACxBP,QAA2B;EAAA,OAE3B,SAASQ,eAAeA,CAACN,KAAY,EAAE;IACrC,IAAMO,OAAO,GAAGT,QAAQ,CAACU,cAAc,CAACR,KAAK,CAAC;IAC9C,IAAIO,OAAO,CAACE,MAAM,KAAK,CAAC,EAAE;MACxB,MAAM,IAAIhB,OAAA,CAAAU,cAAc,CACtB,mCAAmC,IAAAb,aAAA,CAAAM,OAAY,EAACI,KAAK,CAAC,EAAE,EACxDM,eACF,CAAC;IACH;IACA,OAAOC,OAAO;EAChB,CAAC;AAAA;AAEH,IAAMG,mBAAmB,GACvB,SADIA,mBAAmBA,CACvBZ,QAA2B;EAAA,OAE3B,SAASa,cAAcA,CAACX,KAAY,EAAE;IACpC,IAAI;MACF,OAAOH,iBAAiB,CAACC,QAAQ,CAAC,CAACE,KAAK,CAAC;IAC3C,CAAC,CAAC,OAAOE,KAAK,EAAE;MACd,OAAO,IAAAT,OAAA,CAAAmB,kBAAkB,EAACV,KAAK,EAAES,cAAc,CAAC;IAClD;EACF,CAAC;AAAA;AAEH,IAAME,sBAAsB,GACzB,SADGA,sBAAsBA,CACzBf,QAA2B;EAAA,OAC3B,UAAAE,KAAY,EAAK;IAChB,IAAI;MACF,OAAOK,oBAAoB,CAACP,QAAQ,CAAC,CAACE,KAAK,CAAC;IAC9C,CAAC,CAAC,OAAAc,OAAA,EAAM;MACN,OAAO,EAAE;IACX;EACF,CAAC;AAAA;AAWI,IAAMC,wBAAwB,GAAI,SAA5BA,wBAAwBA,CAAIjB,QAA2B;EAAA,OAA4B;IAC9FD,iBAAiB,EAAEA,iBAAiB,CAACC,QAAQ,CAAC;IAC9CO,oBAAoB,EAAEA,oBAAoB,CAACP,QAAQ,CAAC;IACpDY,mBAAmB,EAAEA,mBAAmB,CAACZ,QAAQ,CAAC;IAClDe,sBAAsB,EAAEA,sBAAsB,CAACf,QAAQ;EACzD,CAAC;AAAA,CAAC;AAACkB,OAAA,CAAAD,wBAAA,GAAAA,wBAAA","ignoreList":[]}