{"version":3,"names":["_secureDataService","_interopRequireDefault","require","describe","it","_asyncToGenerator2","default","sample","text","long","repeat","nested","a","b","c","d","encrypted","secureDataService","encryptData","algorithm","decrypted","decryptData","expect","toBeTruthy","toBe","length"],"sources":["secureDataService.roundtrip.test.ts"],"sourcesContent":["import secureDataService, { EncryptedData } from '@/services/encryption/secureDataService';\n\ndescribe('secureDataService AES-GCM round-trip', () => {\n  it('encrypts and decrypts unicode and large payloads correctly (AES-256-GCM)', async () => {\n    // Skip if runtime falls back to SHA256_FALLBACK (e.g., missing quick-crypto)\n    const sample = {\n      text: 'Merhaba üåø d√ºny√¢ ‚Äî „Åì„Çì„Å´„Å°„ÅØ ‚Äî ŸÖÿ±ÿ≠ÿ®ÿß ‚Äî üòÄ',\n      long: 'x'.repeat(256 * 1024), // 256 KB payload\n      nested: { a: 1, b: [1,2,3], c: { d: '√ßƒü√º≈üi√∂' } }\n    };\n    const encrypted: EncryptedData = await secureDataService.encryptData(sample);\n    if (encrypted.algorithm !== 'AES-256-GCM') {\n      // Environment does not support AES (e.g., CI without quick-crypto); this is acceptable\n      // for non-secret telemetry fallback. Skip strict round-trip assertion.\n      return;\n    }\n    const decrypted = await secureDataService.decryptData(encrypted);\n    expect(decrypted).toBeTruthy();\n    expect((decrypted as any).text).toBe(sample.text);\n    expect((decrypted as any).long.length).toBe(sample.long.length);\n    expect((decrypted as any).nested.c.d).toBe(sample.nested.c.d);\n  });\n});\n\n\n"],"mappings":";;AAAA,IAAAA,kBAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEAC,QAAQ,CAAC,sCAAsC,EAAE,YAAM;EACrDC,EAAE,CAAC,0EAA0E,MAAAC,kBAAA,CAAAC,OAAA,EAAE,aAAY;IAEzF,IAAMC,MAAM,GAAG;MACbC,IAAI,EAAE,uCAAuC;MAC7CC,IAAI,EAAE,GAAG,CAACC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC;MAC5BC,MAAM,EAAE;QAAEC,CAAC,EAAE,CAAC;QAAEC,CAAC,EAAE,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC;QAAEC,CAAC,EAAE;UAAEC,CAAC,EAAE;QAAS;MAAE;IACjD,CAAC;IACD,IAAMC,SAAwB,SAASC,0BAAiB,CAACC,WAAW,CAACX,MAAM,CAAC;IAC5E,IAAIS,SAAS,CAACG,SAAS,KAAK,aAAa,EAAE;MAGzC;IACF;IACA,IAAMC,SAAS,SAASH,0BAAiB,CAACI,WAAW,CAACL,SAAS,CAAC;IAChEM,MAAM,CAACF,SAAS,CAAC,CAACG,UAAU,CAAC,CAAC;IAC9BD,MAAM,CAAEF,SAAS,CAASZ,IAAI,CAAC,CAACgB,IAAI,CAACjB,MAAM,CAACC,IAAI,CAAC;IACjDc,MAAM,CAAEF,SAAS,CAASX,IAAI,CAACgB,MAAM,CAAC,CAACD,IAAI,CAACjB,MAAM,CAACE,IAAI,CAACgB,MAAM,CAAC;IAC/DH,MAAM,CAAEF,SAAS,CAAST,MAAM,CAACG,CAAC,CAACC,CAAC,CAAC,CAACS,IAAI,CAACjB,MAAM,CAACI,MAAM,CAACG,CAAC,CAACC,CAAC,CAAC;EAC/D,CAAC,EAAC;AACJ,CAAC,CAAC","ignoreList":[]}