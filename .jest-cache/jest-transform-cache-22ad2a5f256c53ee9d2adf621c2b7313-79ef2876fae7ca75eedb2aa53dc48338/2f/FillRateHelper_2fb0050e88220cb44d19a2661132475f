5137b827de14dc40c550180dcae5b242
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _ListMetricsAggregator = _interopRequireDefault(require("./ListMetricsAggregator"));
var Info = (0, _createClass2.default)(function Info() {
  (0, _classCallCheck2.default)(this, Info);
  this.any_blank_count = 0;
  this.any_blank_ms = 0;
  this.any_blank_speed_sum = 0;
  this.mostly_blank_count = 0;
  this.mostly_blank_ms = 0;
  this.pixels_blank = 0;
  this.pixels_sampled = 0;
  this.pixels_scrolled = 0;
  this.total_time_spent = 0;
  this.sample_count = 0;
});
var DEBUG = false;
var _listeners = [];
var _minSampleCount = 10;
var _sampleRate = DEBUG ? 1 : null;
var FillRateHelper = function () {
  function FillRateHelper(listMetrics) {
    (0, _classCallCheck2.default)(this, FillRateHelper);
    this._anyBlankStartTime = null;
    this._enabled = false;
    this._info = new Info();
    this._mostlyBlankStartTime = null;
    this._samplesStartTime = null;
    this._listMetrics = listMetrics;
    this._enabled = (_sampleRate || 0) > Math.random();
    this._resetData();
  }
  return (0, _createClass2.default)(FillRateHelper, [{
    key: "activate",
    value: function activate() {
      if (this._enabled && this._samplesStartTime == null) {
        DEBUG && console.debug('FillRateHelper: activate');
        this._samplesStartTime = global.performance.now();
      }
    }
  }, {
    key: "deactivateAndFlush",
    value: function deactivateAndFlush() {
      if (!this._enabled) {
        return;
      }
      var start = this._samplesStartTime;
      if (start == null) {
        DEBUG && console.debug('FillRateHelper: bail on deactivate with no start time');
        return;
      }
      if (this._info.sample_count < _minSampleCount) {
        this._resetData();
        return;
      }
      var total_time_spent = global.performance.now() - start;
      var info = Object.assign({}, this._info, {
        total_time_spent: total_time_spent
      });
      if (DEBUG) {
        var derived = {
          avg_blankness: this._info.pixels_blank / this._info.pixels_sampled,
          avg_speed: this._info.pixels_scrolled / (total_time_spent / 1000),
          avg_speed_when_any_blank: this._info.any_blank_speed_sum / this._info.any_blank_count,
          any_blank_per_min: this._info.any_blank_count / (total_time_spent / 1000 / 60),
          any_blank_time_frac: this._info.any_blank_ms / total_time_spent,
          mostly_blank_per_min: this._info.mostly_blank_count / (total_time_spent / 1000 / 60),
          mostly_blank_time_frac: this._info.mostly_blank_ms / total_time_spent
        };
        for (var key in derived) {
          derived[key] = Math.round(1000 * derived[key]) / 1000;
        }
        console.debug('FillRateHelper deactivateAndFlush: ', {
          derived: derived,
          info: info
        });
      }
      _listeners.forEach(function (listener) {
        return listener(info);
      });
      this._resetData();
    }
  }, {
    key: "computeBlankness",
    value: function computeBlankness(props, cellsAroundViewport, scrollMetrics) {
      if (!this._enabled || props.getItemCount(props.data) === 0 || cellsAroundViewport.last < cellsAroundViewport.first || this._samplesStartTime == null) {
        return 0;
      }
      var dOffset = scrollMetrics.dOffset,
        offset = scrollMetrics.offset,
        velocity = scrollMetrics.velocity,
        visibleLength = scrollMetrics.visibleLength;
      this._info.sample_count++;
      this._info.pixels_sampled += Math.round(visibleLength);
      this._info.pixels_scrolled += Math.round(Math.abs(dOffset));
      var scrollSpeed = Math.round(Math.abs(velocity) * 1000);
      var now = global.performance.now();
      if (this._anyBlankStartTime != null) {
        this._info.any_blank_ms += now - this._anyBlankStartTime;
      }
      this._anyBlankStartTime = null;
      if (this._mostlyBlankStartTime != null) {
        this._info.mostly_blank_ms += now - this._mostlyBlankStartTime;
      }
      this._mostlyBlankStartTime = null;
      var blankTop = 0;
      var first = cellsAroundViewport.first;
      var firstFrame = this._listMetrics.getCellMetrics(first, props);
      while (first <= cellsAroundViewport.last && (!firstFrame || !firstFrame.isMounted)) {
        firstFrame = this._listMetrics.getCellMetrics(first, props);
        first++;
      }
      if (firstFrame && first > 0) {
        blankTop = Math.min(visibleLength, Math.max(0, firstFrame.offset - offset));
      }
      var blankBottom = 0;
      var last = cellsAroundViewport.last;
      var lastFrame = this._listMetrics.getCellMetrics(last, props);
      while (last >= cellsAroundViewport.first && (!lastFrame || !lastFrame.isMounted)) {
        lastFrame = this._listMetrics.getCellMetrics(last, props);
        last--;
      }
      if (lastFrame && last < props.getItemCount(props.data) - 1) {
        var bottomEdge = lastFrame.offset + lastFrame.length;
        blankBottom = Math.min(visibleLength, Math.max(0, offset + visibleLength - bottomEdge));
      }
      var pixels_blank = Math.round(blankTop + blankBottom);
      var blankness = pixels_blank / visibleLength;
      if (blankness > 0) {
        this._anyBlankStartTime = now;
        this._info.any_blank_speed_sum += scrollSpeed;
        this._info.any_blank_count++;
        this._info.pixels_blank += pixels_blank;
        if (blankness > 0.5) {
          this._mostlyBlankStartTime = now;
          this._info.mostly_blank_count++;
        }
      } else if (scrollSpeed < 0.01 || Math.abs(dOffset) < 1) {
        this.deactivateAndFlush();
      }
      return blankness;
    }
  }, {
    key: "enabled",
    value: function enabled() {
      return this._enabled;
    }
  }, {
    key: "_resetData",
    value: function _resetData() {
      this._anyBlankStartTime = null;
      this._info = new Info();
      this._mostlyBlankStartTime = null;
      this._samplesStartTime = null;
    }
  }], [{
    key: "addListener",
    value: function addListener(callback) {
      if (_sampleRate === null) {
        console.warn('Call `FillRateHelper.setSampleRate` before `addListener`.');
      }
      _listeners.push(callback);
      return {
        remove: function remove() {
          _listeners = _listeners.filter(function (listener) {
            return callback !== listener;
          });
        }
      };
    }
  }, {
    key: "setSampleRate",
    value: function setSampleRate(sampleRate) {
      _sampleRate = sampleRate;
    }
  }, {
    key: "setMinSampleCount",
    value: function setMinSampleCount(minSampleCount) {
      _minSampleCount = minSampleCount;
    }
  }]);
}();
var _default = exports.default = FillRateHelper;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGVmYXVsdCIsIl9jcmVhdGVDbGFzczIiLCJfY2xhc3NDYWxsQ2hlY2syIiwiX0xpc3RNZXRyaWNzQWdncmVnYXRvciIsIkluZm8iLCJhbnlfYmxhbmtfY291bnQiLCJhbnlfYmxhbmtfbXMiLCJhbnlfYmxhbmtfc3BlZWRfc3VtIiwibW9zdGx5X2JsYW5rX2NvdW50IiwibW9zdGx5X2JsYW5rX21zIiwicGl4ZWxzX2JsYW5rIiwicGl4ZWxzX3NhbXBsZWQiLCJwaXhlbHNfc2Nyb2xsZWQiLCJ0b3RhbF90aW1lX3NwZW50Iiwic2FtcGxlX2NvdW50IiwiREVCVUciLCJfbGlzdGVuZXJzIiwiX21pblNhbXBsZUNvdW50IiwiX3NhbXBsZVJhdGUiLCJGaWxsUmF0ZUhlbHBlciIsImxpc3RNZXRyaWNzIiwiX2FueUJsYW5rU3RhcnRUaW1lIiwiX2VuYWJsZWQiLCJfaW5mbyIsIl9tb3N0bHlCbGFua1N0YXJ0VGltZSIsIl9zYW1wbGVzU3RhcnRUaW1lIiwiX2xpc3RNZXRyaWNzIiwiTWF0aCIsInJhbmRvbSIsIl9yZXNldERhdGEiLCJrZXkiLCJhY3RpdmF0ZSIsImNvbnNvbGUiLCJkZWJ1ZyIsImdsb2JhbCIsInBlcmZvcm1hbmNlIiwibm93IiwiZGVhY3RpdmF0ZUFuZEZsdXNoIiwic3RhcnQiLCJpbmZvIiwiYXNzaWduIiwiZGVyaXZlZCIsImF2Z19ibGFua25lc3MiLCJhdmdfc3BlZWQiLCJhdmdfc3BlZWRfd2hlbl9hbnlfYmxhbmsiLCJhbnlfYmxhbmtfcGVyX21pbiIsImFueV9ibGFua190aW1lX2ZyYWMiLCJtb3N0bHlfYmxhbmtfcGVyX21pbiIsIm1vc3RseV9ibGFua190aW1lX2ZyYWMiLCJyb3VuZCIsImZvckVhY2giLCJsaXN0ZW5lciIsImNvbXB1dGVCbGFua25lc3MiLCJwcm9wcyIsImNlbGxzQXJvdW5kVmlld3BvcnQiLCJzY3JvbGxNZXRyaWNzIiwiZ2V0SXRlbUNvdW50IiwiZGF0YSIsImxhc3QiLCJmaXJzdCIsImRPZmZzZXQiLCJvZmZzZXQiLCJ2ZWxvY2l0eSIsInZpc2libGVMZW5ndGgiLCJhYnMiLCJzY3JvbGxTcGVlZCIsImJsYW5rVG9wIiwiZmlyc3RGcmFtZSIsImdldENlbGxNZXRyaWNzIiwiaXNNb3VudGVkIiwibWluIiwibWF4IiwiYmxhbmtCb3R0b20iLCJsYXN0RnJhbWUiLCJib3R0b21FZGdlIiwibGVuZ3RoIiwiYmxhbmtuZXNzIiwiZW5hYmxlZCIsImFkZExpc3RlbmVyIiwiY2FsbGJhY2siLCJ3YXJuIiwicHVzaCIsInJlbW92ZSIsImZpbHRlciIsInNldFNhbXBsZVJhdGUiLCJzYW1wbGVSYXRlIiwic2V0TWluU2FtcGxlQ291bnQiLCJtaW5TYW1wbGVDb3VudCIsIl9kZWZhdWx0Il0sInNvdXJjZXMiOlsiRmlsbFJhdGVIZWxwZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7Q2VsbE1ldHJpY1Byb3BzfSBmcm9tICcuL0xpc3RNZXRyaWNzQWdncmVnYXRvcic7XG5cbmltcG9ydCBMaXN0TWV0cmljc0FnZ3JlZ2F0b3IgZnJvbSAnLi9MaXN0TWV0cmljc0FnZ3JlZ2F0b3InO1xuXG5leHBvcnQgdHlwZSBGaWxsUmF0ZUluZm8gPSBJbmZvO1xuXG5jbGFzcyBJbmZvIHtcbiAgYW55X2JsYW5rX2NvdW50OiBudW1iZXIgPSAwO1xuICBhbnlfYmxhbmtfbXM6IG51bWJlciA9IDA7XG4gIGFueV9ibGFua19zcGVlZF9zdW06IG51bWJlciA9IDA7XG4gIG1vc3RseV9ibGFua19jb3VudDogbnVtYmVyID0gMDtcbiAgbW9zdGx5X2JsYW5rX21zOiBudW1iZXIgPSAwO1xuICBwaXhlbHNfYmxhbms6IG51bWJlciA9IDA7XG4gIHBpeGVsc19zYW1wbGVkOiBudW1iZXIgPSAwO1xuICBwaXhlbHNfc2Nyb2xsZWQ6IG51bWJlciA9IDA7XG4gIHRvdGFsX3RpbWVfc3BlbnQ6IG51bWJlciA9IDA7XG4gIHNhbXBsZV9jb3VudDogbnVtYmVyID0gMDtcbn1cblxuY29uc3QgREVCVUcgPSBmYWxzZTtcblxubGV0IF9saXN0ZW5lcnM6IEFycmF5PChJbmZvKSA9PiB2b2lkPiA9IFtdO1xubGV0IF9taW5TYW1wbGVDb3VudCA9IDEwO1xubGV0IF9zYW1wbGVSYXRlID0gREVCVUcgPyAxIDogbnVsbDtcblxuLyoqXG4gKiBBIGhlbHBlciBjbGFzcyBmb3IgZGV0ZWN0aW5nIHdoZW4gdGhlIG1heGltZW0gZmlsbCByYXRlIG9mIGBWaXJ0dWFsaXplZExpc3RgIGlzIGV4Y2VlZGVkLlxuICogQnkgZGVmYXVsdCB0aGUgc2FtcGxpbmcgcmF0ZSBpcyBzZXQgdG8gemVybyBhbmQgdGhpcyB3aWxsIGRvIG5vdGhpbmcuIElmIHlvdSB3YW50IHRvIGNvbGxlY3RcbiAqIHNhbXBsZXMgKGUuZy4gdG8gbG9nIHRoZW0pLCBtYWtlIHN1cmUgdG8gY2FsbCBgRmlsbFJhdGVIZWxwZXIuc2V0U2FtcGxlUmF0ZSgwLjAtMS4wKWAuXG4gKlxuICogTGlzdGVuZXJzIGFuZCBzYW1wbGUgcmF0ZSBhcmUgZ2xvYmFsIGZvciBhbGwgYFZpcnR1YWxpemVkTGlzdGBzIC0gdHlwaWNhbCB1c2FnZSB3aWxsIGNvbWJpbmUgd2l0aFxuICogYFNjZW5lVHJhY2tlci5nZXRBY3RpdmVTY2VuZWAgdG8gZGV0ZXJtaW5lIHRoZSBjb250ZXh0IG9mIHRoZSBldmVudHMuXG4gKi9cbmNsYXNzIEZpbGxSYXRlSGVscGVyIHtcbiAgX2FueUJsYW5rU3RhcnRUaW1lOiA/bnVtYmVyID0gbnVsbDtcbiAgX2VuYWJsZWQgPSBmYWxzZTtcbiAgX2xpc3RNZXRyaWNzOiBMaXN0TWV0cmljc0FnZ3JlZ2F0b3I7XG4gIF9pbmZvOiBJbmZvID0gbmV3IEluZm8oKTtcbiAgX21vc3RseUJsYW5rU3RhcnRUaW1lOiA/bnVtYmVyID0gbnVsbDtcbiAgX3NhbXBsZXNTdGFydFRpbWU6ID9udW1iZXIgPSBudWxsO1xuXG4gIHN0YXRpYyBhZGRMaXN0ZW5lcihjYWxsYmFjazogRmlsbFJhdGVJbmZvID0+IHZvaWQpOiB7XG4gICAgcmVtb3ZlOiAoKSA9PiB2b2lkLFxuICAgIC4uLlxuICB9IHtcbiAgICBpZiAoX3NhbXBsZVJhdGUgPT09IG51bGwpIHtcbiAgICAgIGNvbnNvbGUud2FybignQ2FsbCBgRmlsbFJhdGVIZWxwZXIuc2V0U2FtcGxlUmF0ZWAgYmVmb3JlIGBhZGRMaXN0ZW5lcmAuJyk7XG4gICAgfVxuICAgIF9saXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlbW92ZTogKCkgPT4ge1xuICAgICAgICBfbGlzdGVuZXJzID0gX2xpc3RlbmVycy5maWx0ZXIobGlzdGVuZXIgPT4gY2FsbGJhY2sgIT09IGxpc3RlbmVyKTtcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIHN0YXRpYyBzZXRTYW1wbGVSYXRlKHNhbXBsZVJhdGU6IG51bWJlcikge1xuICAgIF9zYW1wbGVSYXRlID0gc2FtcGxlUmF0ZTtcbiAgfVxuXG4gIHN0YXRpYyBzZXRNaW5TYW1wbGVDb3VudChtaW5TYW1wbGVDb3VudDogbnVtYmVyKSB7XG4gICAgX21pblNhbXBsZUNvdW50ID0gbWluU2FtcGxlQ291bnQ7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihsaXN0TWV0cmljczogTGlzdE1ldHJpY3NBZ2dyZWdhdG9yKSB7XG4gICAgdGhpcy5fbGlzdE1ldHJpY3MgPSBsaXN0TWV0cmljcztcbiAgICB0aGlzLl9lbmFibGVkID0gKF9zYW1wbGVSYXRlIHx8IDApID4gTWF0aC5yYW5kb20oKTtcbiAgICB0aGlzLl9yZXNldERhdGEoKTtcbiAgfVxuXG4gIGFjdGl2YXRlKCkge1xuICAgIGlmICh0aGlzLl9lbmFibGVkICYmIHRoaXMuX3NhbXBsZXNTdGFydFRpbWUgPT0gbnVsbCkge1xuICAgICAgREVCVUcgJiYgY29uc29sZS5kZWJ1ZygnRmlsbFJhdGVIZWxwZXI6IGFjdGl2YXRlJyk7XG4gICAgICB0aGlzLl9zYW1wbGVzU3RhcnRUaW1lID0gZ2xvYmFsLnBlcmZvcm1hbmNlLm5vdygpO1xuICAgIH1cbiAgfVxuXG4gIGRlYWN0aXZhdGVBbmRGbHVzaCgpIHtcbiAgICBpZiAoIXRoaXMuX2VuYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9zYW1wbGVzU3RhcnRUaW1lOyAvLyBjb25zdCBmb3IgZmxvd1xuICAgIGlmIChzdGFydCA9PSBudWxsKSB7XG4gICAgICBERUJVRyAmJlxuICAgICAgICBjb25zb2xlLmRlYnVnKCdGaWxsUmF0ZUhlbHBlcjogYmFpbCBvbiBkZWFjdGl2YXRlIHdpdGggbm8gc3RhcnQgdGltZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5faW5mby5zYW1wbGVfY291bnQgPCBfbWluU2FtcGxlQ291bnQpIHtcbiAgICAgIC8vIERvbid0IGJvdGhlciB3aXRoIHVuZGVyLXNhbXBsZWQgZXZlbnRzLlxuICAgICAgdGhpcy5fcmVzZXREYXRhKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRvdGFsX3RpbWVfc3BlbnQgPSBnbG9iYWwucGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydDtcbiAgICBjb25zdCBpbmZvOiBhbnkgPSB7XG4gICAgICAuLi50aGlzLl9pbmZvLFxuICAgICAgdG90YWxfdGltZV9zcGVudCxcbiAgICB9O1xuICAgIGlmIChERUJVRykge1xuICAgICAgY29uc3QgZGVyaXZlZCA9IHtcbiAgICAgICAgYXZnX2JsYW5rbmVzczogdGhpcy5faW5mby5waXhlbHNfYmxhbmsgLyB0aGlzLl9pbmZvLnBpeGVsc19zYW1wbGVkLFxuICAgICAgICBhdmdfc3BlZWQ6IHRoaXMuX2luZm8ucGl4ZWxzX3Njcm9sbGVkIC8gKHRvdGFsX3RpbWVfc3BlbnQgLyAxMDAwKSxcbiAgICAgICAgYXZnX3NwZWVkX3doZW5fYW55X2JsYW5rOlxuICAgICAgICAgIHRoaXMuX2luZm8uYW55X2JsYW5rX3NwZWVkX3N1bSAvIHRoaXMuX2luZm8uYW55X2JsYW5rX2NvdW50LFxuICAgICAgICBhbnlfYmxhbmtfcGVyX21pbjpcbiAgICAgICAgICB0aGlzLl9pbmZvLmFueV9ibGFua19jb3VudCAvICh0b3RhbF90aW1lX3NwZW50IC8gMTAwMCAvIDYwKSxcbiAgICAgICAgYW55X2JsYW5rX3RpbWVfZnJhYzogdGhpcy5faW5mby5hbnlfYmxhbmtfbXMgLyB0b3RhbF90aW1lX3NwZW50LFxuICAgICAgICBtb3N0bHlfYmxhbmtfcGVyX21pbjpcbiAgICAgICAgICB0aGlzLl9pbmZvLm1vc3RseV9ibGFua19jb3VudCAvICh0b3RhbF90aW1lX3NwZW50IC8gMTAwMCAvIDYwKSxcbiAgICAgICAgbW9zdGx5X2JsYW5rX3RpbWVfZnJhYzogdGhpcy5faW5mby5tb3N0bHlfYmxhbmtfbXMgLyB0b3RhbF90aW1lX3NwZW50LFxuICAgICAgfTtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIGRlcml2ZWQpIHtcbiAgICAgICAgLy8gJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddXG4gICAgICAgIC8vICRGbG93Rml4TWVbaW52YWxpZC1jb21wdXRlZC1wcm9wXVxuICAgICAgICBkZXJpdmVkW2tleV0gPSBNYXRoLnJvdW5kKDEwMDAgKiBkZXJpdmVkW2tleV0pIC8gMTAwMDtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUuZGVidWcoJ0ZpbGxSYXRlSGVscGVyIGRlYWN0aXZhdGVBbmRGbHVzaDogJywge2Rlcml2ZWQsIGluZm99KTtcbiAgICB9XG4gICAgX2xpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyKGluZm8pKTtcbiAgICB0aGlzLl9yZXNldERhdGEoKTtcbiAgfVxuXG4gIGNvbXB1dGVCbGFua25lc3MoXG4gICAgcHJvcHM6IHtcbiAgICAgIC4uLkNlbGxNZXRyaWNQcm9wcyxcbiAgICAgIGluaXRpYWxOdW1Ub1JlbmRlcj86ID9udW1iZXIsXG4gICAgICAuLi5cbiAgICB9LFxuICAgIGNlbGxzQXJvdW5kVmlld3BvcnQ6IHtcbiAgICAgIGZpcnN0OiBudW1iZXIsXG4gICAgICBsYXN0OiBudW1iZXIsXG4gICAgICAuLi5cbiAgICB9LFxuICAgIHNjcm9sbE1ldHJpY3M6IHtcbiAgICAgIGRPZmZzZXQ6IG51bWJlcixcbiAgICAgIG9mZnNldDogbnVtYmVyLFxuICAgICAgdmVsb2NpdHk6IG51bWJlcixcbiAgICAgIHZpc2libGVMZW5ndGg6IG51bWJlcixcbiAgICAgIC4uLlxuICAgIH0sXG4gICk6IG51bWJlciB7XG4gICAgaWYgKFxuICAgICAgIXRoaXMuX2VuYWJsZWQgfHxcbiAgICAgIHByb3BzLmdldEl0ZW1Db3VudChwcm9wcy5kYXRhKSA9PT0gMCB8fFxuICAgICAgY2VsbHNBcm91bmRWaWV3cG9ydC5sYXN0IDwgY2VsbHNBcm91bmRWaWV3cG9ydC5maXJzdCB8fFxuICAgICAgdGhpcy5fc2FtcGxlc1N0YXJ0VGltZSA9PSBudWxsXG4gICAgKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgY29uc3Qge2RPZmZzZXQsIG9mZnNldCwgdmVsb2NpdHksIHZpc2libGVMZW5ndGh9ID0gc2Nyb2xsTWV0cmljcztcblxuICAgIC8vIERlbm9taW5hdG9yIG1ldHJpY3MgdGhhdCB3ZSB0cmFjayBmb3IgYWxsIGV2ZW50cyAtIG1vc3Qgb2YgdGhlIHRpbWUgdGhlcmUgaXMgbm8gYmxhbmtuZXNzIGFuZFxuICAgIC8vIHdlIHdhbnQgdG8gY2FwdHVyZSB0aGF0LlxuICAgIHRoaXMuX2luZm8uc2FtcGxlX2NvdW50Kys7XG4gICAgdGhpcy5faW5mby5waXhlbHNfc2FtcGxlZCArPSBNYXRoLnJvdW5kKHZpc2libGVMZW5ndGgpO1xuICAgIHRoaXMuX2luZm8ucGl4ZWxzX3Njcm9sbGVkICs9IE1hdGgucm91bmQoTWF0aC5hYnMoZE9mZnNldCkpO1xuICAgIGNvbnN0IHNjcm9sbFNwZWVkID0gTWF0aC5yb3VuZChNYXRoLmFicyh2ZWxvY2l0eSkgKiAxMDAwKTsgLy8gcHggLyBzZWNcblxuICAgIC8vIFdoZXRoZXIgYmxhbmsgbm93IG9yIG5vdCwgcmVjb3JkIHRoZSBlbGFwc2VkIHRpbWUgYmxhbmsgaWYgd2Ugd2VyZSBibGFuayBsYXN0IHRpbWUuXG4gICAgY29uc3Qgbm93ID0gZ2xvYmFsLnBlcmZvcm1hbmNlLm5vdygpO1xuICAgIGlmICh0aGlzLl9hbnlCbGFua1N0YXJ0VGltZSAhPSBudWxsKSB7XG4gICAgICB0aGlzLl9pbmZvLmFueV9ibGFua19tcyArPSBub3cgLSB0aGlzLl9hbnlCbGFua1N0YXJ0VGltZTtcbiAgICB9XG4gICAgdGhpcy5fYW55QmxhbmtTdGFydFRpbWUgPSBudWxsO1xuICAgIGlmICh0aGlzLl9tb3N0bHlCbGFua1N0YXJ0VGltZSAhPSBudWxsKSB7XG4gICAgICB0aGlzLl9pbmZvLm1vc3RseV9ibGFua19tcyArPSBub3cgLSB0aGlzLl9tb3N0bHlCbGFua1N0YXJ0VGltZTtcbiAgICB9XG4gICAgdGhpcy5fbW9zdGx5QmxhbmtTdGFydFRpbWUgPSBudWxsO1xuXG4gICAgbGV0IGJsYW5rVG9wID0gMDtcbiAgICBsZXQgZmlyc3QgPSBjZWxsc0Fyb3VuZFZpZXdwb3J0LmZpcnN0O1xuICAgIGxldCBmaXJzdEZyYW1lID0gdGhpcy5fbGlzdE1ldHJpY3MuZ2V0Q2VsbE1ldHJpY3MoZmlyc3QsIHByb3BzKTtcbiAgICB3aGlsZSAoXG4gICAgICBmaXJzdCA8PSBjZWxsc0Fyb3VuZFZpZXdwb3J0Lmxhc3QgJiZcbiAgICAgICghZmlyc3RGcmFtZSB8fCAhZmlyc3RGcmFtZS5pc01vdW50ZWQpXG4gICAgKSB7XG4gICAgICBmaXJzdEZyYW1lID0gdGhpcy5fbGlzdE1ldHJpY3MuZ2V0Q2VsbE1ldHJpY3MoZmlyc3QsIHByb3BzKTtcbiAgICAgIGZpcnN0Kys7XG4gICAgfVxuICAgIC8vIE9ubHkgY291bnQgYmxhbmtUb3AgaWYgd2UgYXJlbid0IHJlbmRlcmluZyB0aGUgZmlyc3QgaXRlbSwgb3RoZXJ3aXNlIHdlIHdpbGwgY291bnQgdGhlIGhlYWRlclxuICAgIC8vIGFzIGJsYW5rLlxuICAgIGlmIChmaXJzdEZyYW1lICYmIGZpcnN0ID4gMCkge1xuICAgICAgYmxhbmtUb3AgPSBNYXRoLm1pbihcbiAgICAgICAgdmlzaWJsZUxlbmd0aCxcbiAgICAgICAgTWF0aC5tYXgoMCwgZmlyc3RGcmFtZS5vZmZzZXQgLSBvZmZzZXQpLFxuICAgICAgKTtcbiAgICB9XG4gICAgbGV0IGJsYW5rQm90dG9tID0gMDtcbiAgICBsZXQgbGFzdCA9IGNlbGxzQXJvdW5kVmlld3BvcnQubGFzdDtcbiAgICBsZXQgbGFzdEZyYW1lID0gdGhpcy5fbGlzdE1ldHJpY3MuZ2V0Q2VsbE1ldHJpY3MobGFzdCwgcHJvcHMpO1xuICAgIHdoaWxlIChcbiAgICAgIGxhc3QgPj0gY2VsbHNBcm91bmRWaWV3cG9ydC5maXJzdCAmJlxuICAgICAgKCFsYXN0RnJhbWUgfHwgIWxhc3RGcmFtZS5pc01vdW50ZWQpXG4gICAgKSB7XG4gICAgICBsYXN0RnJhbWUgPSB0aGlzLl9saXN0TWV0cmljcy5nZXRDZWxsTWV0cmljcyhsYXN0LCBwcm9wcyk7XG4gICAgICBsYXN0LS07XG4gICAgfVxuICAgIC8vIE9ubHkgY291bnQgYmxhbmtCb3R0b20gaWYgd2UgYXJlbid0IHJlbmRlcmluZyB0aGUgbGFzdCBpdGVtLCBvdGhlcndpc2Ugd2Ugd2lsbCBjb3VudCB0aGVcbiAgICAvLyBmb290ZXIgYXMgYmxhbmsuXG4gICAgaWYgKGxhc3RGcmFtZSAmJiBsYXN0IDwgcHJvcHMuZ2V0SXRlbUNvdW50KHByb3BzLmRhdGEpIC0gMSkge1xuICAgICAgY29uc3QgYm90dG9tRWRnZSA9IGxhc3RGcmFtZS5vZmZzZXQgKyBsYXN0RnJhbWUubGVuZ3RoO1xuICAgICAgYmxhbmtCb3R0b20gPSBNYXRoLm1pbihcbiAgICAgICAgdmlzaWJsZUxlbmd0aCxcbiAgICAgICAgTWF0aC5tYXgoMCwgb2Zmc2V0ICsgdmlzaWJsZUxlbmd0aCAtIGJvdHRvbUVkZ2UpLFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgcGl4ZWxzX2JsYW5rID0gTWF0aC5yb3VuZChibGFua1RvcCArIGJsYW5rQm90dG9tKTtcbiAgICBjb25zdCBibGFua25lc3MgPSBwaXhlbHNfYmxhbmsgLyB2aXNpYmxlTGVuZ3RoO1xuICAgIGlmIChibGFua25lc3MgPiAwKSB7XG4gICAgICB0aGlzLl9hbnlCbGFua1N0YXJ0VGltZSA9IG5vdztcbiAgICAgIHRoaXMuX2luZm8uYW55X2JsYW5rX3NwZWVkX3N1bSArPSBzY3JvbGxTcGVlZDtcbiAgICAgIHRoaXMuX2luZm8uYW55X2JsYW5rX2NvdW50Kys7XG4gICAgICB0aGlzLl9pbmZvLnBpeGVsc19ibGFuayArPSBwaXhlbHNfYmxhbms7XG4gICAgICBpZiAoYmxhbmtuZXNzID4gMC41KSB7XG4gICAgICAgIHRoaXMuX21vc3RseUJsYW5rU3RhcnRUaW1lID0gbm93O1xuICAgICAgICB0aGlzLl9pbmZvLm1vc3RseV9ibGFua19jb3VudCsrO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc2Nyb2xsU3BlZWQgPCAwLjAxIHx8IE1hdGguYWJzKGRPZmZzZXQpIDwgMSkge1xuICAgICAgdGhpcy5kZWFjdGl2YXRlQW5kRmx1c2goKTtcbiAgICB9XG4gICAgcmV0dXJuIGJsYW5rbmVzcztcbiAgfVxuXG4gIGVuYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2VuYWJsZWQ7XG4gIH1cblxuICBfcmVzZXREYXRhKCkge1xuICAgIHRoaXMuX2FueUJsYW5rU3RhcnRUaW1lID0gbnVsbDtcbiAgICB0aGlzLl9pbmZvID0gbmV3IEluZm8oKTtcbiAgICB0aGlzLl9tb3N0bHlCbGFua1N0YXJ0VGltZSA9IG51bGw7XG4gICAgdGhpcy5fc2FtcGxlc1N0YXJ0VGltZSA9IG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRmlsbFJhdGVIZWxwZXI7XG4iXSwibWFwcGluZ3MiOiJBQVVBLFlBQVk7O0FBQUMsSUFBQUEsc0JBQUEsR0FBQUMsT0FBQTtBQUFBQyxNQUFBLENBQUFDLGNBQUEsQ0FBQUMsT0FBQTtFQUFBQyxLQUFBO0FBQUE7QUFBQUQsT0FBQSxDQUFBRSxPQUFBO0FBQUEsSUFBQUMsYUFBQSxHQUFBUCxzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQU8sZ0JBQUEsR0FBQVIsc0JBQUEsQ0FBQUMsT0FBQTtBQUliLElBQUFRLHNCQUFBLEdBQUFULHNCQUFBLENBQUFDLE9BQUE7QUFBNEQsSUFJdERTLElBQUksT0FBQUgsYUFBQSxDQUFBRCxPQUFBLFdBQUFJLEtBQUE7RUFBQSxJQUFBRixnQkFBQSxDQUFBRixPQUFBLFFBQUFJLElBQUE7RUFBQSxLQUNSQyxlQUFlLEdBQVcsQ0FBQztFQUFBLEtBQzNCQyxZQUFZLEdBQVcsQ0FBQztFQUFBLEtBQ3hCQyxtQkFBbUIsR0FBVyxDQUFDO0VBQUEsS0FDL0JDLGtCQUFrQixHQUFXLENBQUM7RUFBQSxLQUM5QkMsZUFBZSxHQUFXLENBQUM7RUFBQSxLQUMzQkMsWUFBWSxHQUFXLENBQUM7RUFBQSxLQUN4QkMsY0FBYyxHQUFXLENBQUM7RUFBQSxLQUMxQkMsZUFBZSxHQUFXLENBQUM7RUFBQSxLQUMzQkMsZ0JBQWdCLEdBQVcsQ0FBQztFQUFBLEtBQzVCQyxZQUFZLEdBQVcsQ0FBQztBQUFBO0FBRzFCLElBQU1DLEtBQUssR0FBRyxLQUFLO0FBRW5CLElBQUlDLFVBQWlDLEdBQUcsRUFBRTtBQUMxQyxJQUFJQyxlQUFlLEdBQUcsRUFBRTtBQUN4QixJQUFJQyxXQUFXLEdBQUdILEtBQUssR0FBRyxDQUFDLEdBQUcsSUFB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