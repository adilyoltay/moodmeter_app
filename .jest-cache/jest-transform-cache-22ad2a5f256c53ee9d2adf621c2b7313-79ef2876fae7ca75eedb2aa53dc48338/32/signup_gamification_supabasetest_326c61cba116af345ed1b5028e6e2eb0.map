{"version":3,"names":["_userRowMapper","require","describe","test","authUser","id","email","user_metadata","name","app_metadata","provider","row","buildUsersUpsertRow","expect","toMatchObject","created_at","toBe","updated_at"],"sources":["signup_gamification_supabase.test.ts"],"sourcesContent":["import { buildUsersUpsertRow } from '@/utils/userRowMapper';\n\ndescribe('Signup â†’ users row mapping', () => {\n  test('buildUsersUpsertRow maps auth user to users table row', () => {\n    const authUser: any = {\n      id: 'user-xyz',\n      email: 'new.user@test.dev',\n      user_metadata: { name: 'New User' },\n      app_metadata: { provider: 'email' },\n    };\n\n    const row = buildUsersUpsertRow(authUser);\n    expect(row).toMatchObject({\n      id: 'user-xyz',\n      email: 'new.user@test.dev',\n      name: 'New User',\n      provider: 'email',\n    });\n    expect(typeof row.created_at).toBe('string');\n    expect(typeof row.updated_at).toBe('string');\n  });\n\n  test('falls back to email prefix when name missing', () => {\n    const authUser: any = {\n      id: 'user-abc',\n      email: 'someone@example.com',\n      user_metadata: {},\n      app_metadata: {},\n    };\n    const row = buildUsersUpsertRow(authUser);\n    expect(row.name).toBe('someone');\n    expect(row.provider).toBe('email');\n  });\n});\n\n"],"mappings":"AAAA,IAAAA,cAAA,GAAAC,OAAA;AAEAC,QAAQ,CAAC,4BAA4B,EAAE,YAAM;EAC3CC,IAAI,CAAC,uDAAuD,EAAE,YAAM;IAClE,IAAMC,QAAa,GAAG;MACpBC,EAAE,EAAE,UAAU;MACdC,KAAK,EAAE,mBAAmB;MAC1BC,aAAa,EAAE;QAAEC,IAAI,EAAE;MAAW,CAAC;MACnCC,YAAY,EAAE;QAAEC,QAAQ,EAAE;MAAQ;IACpC,CAAC;IAED,IAAMC,GAAG,GAAG,IAAAC,kCAAmB,EAACR,QAAQ,CAAC;IACzCS,MAAM,CAACF,GAAG,CAAC,CAACG,aAAa,CAAC;MACxBT,EAAE,EAAE,UAAU;MACdC,KAAK,EAAE,mBAAmB;MAC1BE,IAAI,EAAE,UAAU;MAChBE,QAAQ,EAAE;IACZ,CAAC,CAAC;IACFG,MAAM,CAAC,OAAOF,GAAG,CAACI,UAAU,CAAC,CAACC,IAAI,CAAC,QAAQ,CAAC;IAC5CH,MAAM,CAAC,OAAOF,GAAG,CAACM,UAAU,CAAC,CAACD,IAAI,CAAC,QAAQ,CAAC;EAC9C,CAAC,CAAC;EAEFb,IAAI,CAAC,8CAA8C,EAAE,YAAM;IACzD,IAAMC,QAAa,GAAG;MACpBC,EAAE,EAAE,UAAU;MACdC,KAAK,EAAE,qBAAqB;MAC5BC,aAAa,EAAE,CAAC,CAAC;MACjBE,YAAY,EAAE,CAAC;IACjB,CAAC;IACD,IAAME,GAAG,GAAG,IAAAC,kCAAmB,EAACR,QAAQ,CAAC;IACzCS,MAAM,CAACF,GAAG,CAACH,IAAI,CAAC,CAACQ,IAAI,CAAC,SAAS,CAAC;IAChCH,MAAM,CAACF,GAAG,CAACD,QAAQ,CAAC,CAACM,IAAI,CAAC,OAAO,CAAC;EACpC,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}