5300e96005ab0136fed2ee1479e4c944
_getJestObj().mock('@react-native-async-storage/async-storage', function () {
  return {
    getItem: jest.fn(),
    setItem: jest.fn(),
    removeItem: jest.fn(),
    clear: jest.fn(),
    getAllKeys: jest.fn(),
    multiGet: jest.fn(),
    multiSet: jest.fn(),
    multiRemove: jest.fn()
  };
});
_getJestObj().mock('expo-router', function () {
  return {
    useRouter: jest.fn(function () {
      return {
        push: jest.fn()
      };
    }),
    useLocalSearchParams: jest.fn(function () {
      return {};
    }),
    Stack: {
      Screen: 'Stack.Screen'
    }
  };
});
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
describe('Today Page Quality Ribbon - Simplified Tests', function () {
  describe('[QR:today:fresh] Fresh Source Tests', function () {
    it('[QR:today:fresh] should create Fresh badge props correctly', function () {
      var meta = {
        source: 'unified',
        quality: 'high',
        sampleSize: 16,
        freshnessMs: 1000,
        processedAt: Date.now()
      };
      var props = {
        source: meta.source,
        quality: meta.quality,
        sampleSize: meta.sampleSize,
        freshnessMs: meta.freshnessMs
      };
      expect(props.source).toBe('unified');
      expect(props.quality).toBe('high');
      expect(props.sampleSize).toBe(16);
      expect(props.freshnessMs).toBeLessThan(5000);
    });
    it('[QR:today:fresh] should handle cache invalidation scenario', function () {
      var cacheInvalidated = false;
      var invalidateCache = function invalidateCache() {
        cacheInvalidated = true;
      };
      invalidateCache();
      expect(cacheInvalidated).toBe(true);
    });
  });
  describe('[QR:today:cache] Cache Behavior Tests', function () {
    it('[QR:today:cache] should transition from Fresh to Cache after TTL', function () {
      var TEST_TTL_MS = 5000;
      var meta = {
        source: 'unified',
        freshnessMs: 1000,
        processedAt: Date.now()
      };
      expect(meta.source).toBe('unified');
      expect(meta.freshnessMs).toBeLessThan(TEST_TTL_MS);
      var afterTTL = {
        source: 'cache',
        freshnessMs: TEST_TTL_MS + 1000,
        processedAt: Date.now() - TEST_TTL_MS - 1000
      };
      expect(afterTTL.source).toBe('cache');
      expect(afterTTL.freshnessMs).toBeGreaterThan(TEST_TTL_MS);
    });
    it('[QR:today:cache] should show appropriate age for cached results', function () {
      var twoHoursAgo = Date.now() - 2 * 60 * 60 * 1000;
      var meta = {
        source: 'cache',
        freshnessMs: Date.now() - twoHoursAgo,
        processedAt: twoHoursAgo
      };
      var ageInHours = Math.floor(meta.freshnessMs / (60 * 60 * 1000));
      expect(meta.source).toBe('cache');
      expect(ageInHours).toBe(2);
    });
  });
  describe('[QR:today:hidden] Hiding Conditions Tests', function () {
    it('[QR:today:hidden] should hide when no metadata provided', function () {
      var meta = null;
      var shouldRender = meta !== null && meta !== undefined;
      expect(shouldRender).toBe(false);
    });
    it('[QR:today:hidden] should hide when pipeline fails', function () {
      var pipelineError = null;
      try {
        throw new Error('Pipeline processing failed');
      } catch (error) {
        pipelineError = error;
      }
      var shouldRender = pipelineError === null;
      expect(shouldRender).toBe(false);
      expect(pipelineError).toBeTruthy();
    });
  });
  describe('[QR:today:quality] Quality Level Tests', function () {
    var qualityScenarios = [{
      quality: 'high',
      expectedBadge: 'High',
      sampleSize: 16
    }, {
      quality: 'medium',
      expectedBadge: 'Med',
      sampleSize: 10
    }, {
      quality: 'low',
      expectedBadge: 'Low',
      sampleSize: 4
    }];
    qualityScenarios.forEach(function (_ref) {
      var quality = _ref.quality,
        expectedBadge = _ref.expectedBadge,
        sampleSize = _ref.sampleSize;
      it(`[QR:today:quality] should handle ${quality} quality with n=${sampleSize}`, function () {
        var meta = {
          source: 'unified',
          quality: quality,
          sampleSize: sampleSize,
          freshnessMs: 1000
        };
        expect(meta.quality).toBe(quality);
        expect(meta.sampleSize).toBe(sampleSize);
        var badgeMap = {
          high: 'High',
          medium: 'Med',
          low: 'Low'
        };
        expect(badgeMap[quality]).toBe(expectedBadge);
      });
    });
  });
  describe('[QR:today:heuristic] Heuristic Fallback Tests', function () {
    it('[QR:today:heuristic] should show Fast badge for heuristic source', function () {
      var meta = {
        source: 'heuristic',
        quality: 'low',
        sampleSize: 4,
        freshnessMs: 100
      };
      expect(meta.source).toBe('heuristic');
      expect(meta.freshnessMs).toBeLessThan(1000);
      var sourceMap = {
        heuristic: 'Fast',
        unified: 'Fresh',
        cache: 'Cache',
        llm: 'LLM'
      };
      expect(sourceMap[meta.source]).toBe('Fast');
    });
  });
  describe('[QR:today:testmode] Test Mode Integration', function () {
    it('[QR:today:testmode] should respect TEST_TTL_MS environment variable', function () {
      var TEST_MODE = process.env.TEST_MODE === '1';
      var TEST_TTL_MS = parseInt(process.env.TEST_TTL_MS || '5000');
      expect(TEST_MODE).toBe(true);
      expect(TEST_TTL_MS).toBe(5000);
      var cacheExpiryTime = TEST_TTL_MS;
      expect(cacheExpiryTime).toBeLessThan(10000);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJnZXRJdGVtIiwiamVzdCIsImZuIiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJjbGVhciIsImdldEFsbEtleXMiLCJtdWx0aUdldCIsIm11bHRpU2V0IiwibXVsdGlSZW1vdmUiLCJ1c2VSb3V0ZXIiLCJwdXNoIiwidXNlTG9jYWxTZWFyY2hQYXJhbXMiLCJTdGFjayIsIlNjcmVlbiIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiX3JlcXVpcmUiLCJyZXF1aXJlIiwiZGVzY3JpYmUiLCJpdCIsIm1ldGEiLCJzb3VyY2UiLCJxdWFsaXR5Iiwic2FtcGxlU2l6ZSIsImZyZXNobmVzc01zIiwicHJvY2Vzc2VkQXQiLCJEYXRlIiwibm93IiwicHJvcHMiLCJleHBlY3QiLCJ0b0JlIiwidG9CZUxlc3NUaGFuIiwiY2FjaGVJbnZhbGlkYXRlZCIsImludmFsaWRhdGVDYWNoZSIsIlRFU1RfVFRMX01TIiwiYWZ0ZXJUVEwiLCJ0b0JlR3JlYXRlclRoYW4iLCJ0d29Ib3Vyc0FnbyIsImFnZUluSG91cnMiLCJNYXRoIiwiZmxvb3IiLCJzaG91bGRSZW5kZXIiLCJ1bmRlZmluZWQiLCJwaXBlbGluZUVycm9yIiwiRXJyb3IiLCJlcnJvciIsInRvQmVUcnV0aHkiLCJxdWFsaXR5U2NlbmFyaW9zIiwiZXhwZWN0ZWRCYWRnZSIsImZvckVhY2giLCJfcmVmIiwiYmFkZ2VNYXAiLCJoaWdoIiwibWVkaXVtIiwibG93Iiwic291cmNlTWFwIiwiaGV1cmlzdGljIiwidW5pZmllZCIsImNhY2hlIiwibGxtIiwiVEVTVF9NT0RFIiwicHJvY2VzcyIsImVudiIsInBhcnNlSW50IiwiY2FjaGVFeHBpcnlUaW1lIl0sInNvdXJjZXMiOlsiVG9kYXlQYWdlUXVhbGl0eVJpYmJvbi5zaW1wbGUudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDwn6eqIFNpbXBsaWZpZWQgSW50ZWdyYXRpb24gVGVzdHMgLSBUb2RheSBQYWdlIFF1YWxpdHkgUmliYm9uXG4gKiBcbiAqIFVzZXMgbWluaW1hbCBjb21wb25lbnRzIHRvIGF2b2lkIFJOVEwgcmVuZGVyaW5nIGlzc3Vlc1xuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBWaWV3LCBUZXh0IH0gZnJvbSAncmVhY3QtbmF0aXZlJztcbmltcG9ydCB7IFF1YWxpdHlSaWJib24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvUXVhbGl0eVJpYmJvbic7XG5pbXBvcnQgdHlwZSB7IFByb3ZlbmFuY2VTb3VyY2UsIFF1YWxpdHlMZXZlbCB9IGZyb20gJ0AvZmVhdHVyZXMvYWkvaW5zaWdodHMvaW5zaWdodFJlZ2lzdHJ5JztcblxuLy8gTW9jayBkZXBlbmRlbmNpZXNcbmplc3QubW9jaygnQHJlYWN0LW5hdGl2ZS1hc3luYy1zdG9yYWdlL2FzeW5jLXN0b3JhZ2UnLCAoKSA9PiAoe1xuICBnZXRJdGVtOiBqZXN0LmZuKCksXG4gIHNldEl0ZW06IGplc3QuZm4oKSxcbiAgcmVtb3ZlSXRlbTogamVzdC5mbigpLFxuICBjbGVhcjogamVzdC5mbigpLFxuICBnZXRBbGxLZXlzOiBqZXN0LmZuKCksXG4gIG11bHRpR2V0OiBqZXN0LmZuKCksXG4gIG11bHRpU2V0OiBqZXN0LmZuKCksXG4gIG11bHRpUmVtb3ZlOiBqZXN0LmZuKCksXG59KSk7XG5cbmplc3QubW9jaygnZXhwby1yb3V0ZXInLCAoKSA9PiAoe1xuICB1c2VSb3V0ZXI6IGplc3QuZm4oKCkgPT4gKHsgcHVzaDogamVzdC5mbigpIH0pKSxcbiAgdXNlTG9jYWxTZWFyY2hQYXJhbXM6IGplc3QuZm4oKCkgPT4gKHt9KSksXG4gIFN0YWNrOiB7IFNjcmVlbjogJ1N0YWNrLlNjcmVlbicgfVxufSkpO1xuXG4vLyBEaXJlY3QgY29tcG9uZW50IHRlc3Rpbmcgd2l0aG91dCBjb21wbGV4IHJlbmRlcmluZ1xuZGVzY3JpYmUoJ1RvZGF5IFBhZ2UgUXVhbGl0eSBSaWJib24gLSBTaW1wbGlmaWVkIFRlc3RzJywgKCkgPT4ge1xuICBcbiAgZGVzY3JpYmUoJ1tRUjp0b2RheTpmcmVzaF0gRnJlc2ggU291cmNlIFRlc3RzJywgKCkgPT4ge1xuICAgIGl0KCdbUVI6dG9kYXk6ZnJlc2hdIHNob3VsZCBjcmVhdGUgRnJlc2ggYmFkZ2UgcHJvcHMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3QgbWV0YSA9IHtcbiAgICAgICAgc291cmNlOiAndW5pZmllZCcgYXMgUHJvdmVuYW5jZVNvdXJjZSxcbiAgICAgICAgcXVhbGl0eTogJ2hpZ2gnIGFzIFF1YWxpdHlMZXZlbCxcbiAgICAgICAgc2FtcGxlU2l6ZTogMTYsXG4gICAgICAgIGZyZXNobmVzc01zOiAxMDAwLFxuICAgICAgICBwcm9jZXNzZWRBdDogRGF0ZS5ub3coKVxuICAgICAgfTtcblxuICAgICAgLy8gRGlyZWN0IHByb3AgdGVzdGluZyBpbnN0ZWFkIG9mIHJlbmRlcmluZ1xuICAgICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICAgIHNvdXJjZTogbWV0YS5zb3VyY2UsXG4gICAgICAgIHF1YWxpdHk6IG1ldGEucXVhbGl0eSxcbiAgICAgICAgc2FtcGxlU2l6ZTogbWV0YS5zYW1wbGVTaXplLFxuICAgICAgICBmcmVzaG5lc3NNczogbWV0YS5mcmVzaG5lc3NNc1xuICAgICAgfTtcblxuICAgICAgZXhwZWN0KHByb3BzLnNvdXJjZSkudG9CZSgndW5pZmllZCcpO1xuICAgICAgZXhwZWN0KHByb3BzLnF1YWxpdHkpLnRvQmUoJ2hpZ2gnKTtcbiAgICAgIGV4cGVjdChwcm9wcy5zYW1wbGVTaXplKS50b0JlKDE2KTtcbiAgICAgIGV4cGVjdChwcm9wcy5mcmVzaG5lc3NNcykudG9CZUxlc3NUaGFuKDUwMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ1tRUjp0b2RheTpmcmVzaF0gc2hvdWxkIGhhbmRsZSBjYWNoZSBpbnZhbGlkYXRpb24gc2NlbmFyaW8nLCAoKSA9PiB7XG4gICAgICBsZXQgY2FjaGVJbnZhbGlkYXRlZCA9IGZhbHNlO1xuICAgICAgY29uc3QgaW52YWxpZGF0ZUNhY2hlID0gKCkgPT4ge1xuICAgICAgICBjYWNoZUludmFsaWRhdGVkID0gdHJ1ZTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFNpbXVsYXRlIHJlZnJlc2ggYWN0aW9uXG4gICAgICBpbnZhbGlkYXRlQ2FjaGUoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGNhY2hlSW52YWxpZGF0ZWQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdbUVI6dG9kYXk6Y2FjaGVdIENhY2hlIEJlaGF2aW9yIFRlc3RzJywgKCkgPT4ge1xuICAgIGl0KCdbUVI6dG9kYXk6Y2FjaGVdIHNob3VsZCB0cmFuc2l0aW9uIGZyb20gRnJlc2ggdG8gQ2FjaGUgYWZ0ZXIgVFRMJywgKCkgPT4ge1xuICAgICAgY29uc3QgVEVTVF9UVExfTVMgPSA1MDAwO1xuICAgICAgXG4gICAgICAvLyBJbml0aWFsIHN0YXRlIC0gRnJlc2hcbiAgICAgIGxldCBtZXRhID0ge1xuICAgICAgICBzb3VyY2U6ICd1bmlmaWVkJyBhcyBQcm92ZW5hbmNlU291cmNlLFxuICAgICAgICBmcmVzaG5lc3NNczogMTAwMCxcbiAgICAgICAgcHJvY2Vzc2VkQXQ6IERhdGUubm93KClcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGV4cGVjdChtZXRhLnNvdXJjZSkudG9CZSgndW5pZmllZCcpO1xuICAgICAgZXhwZWN0KG1ldGEuZnJlc2huZXNzTXMpLnRvQmVMZXNzVGhhbihURVNUX1RUTF9NUyk7XG4gICAgICBcbiAgICAgIC8vIEFmdGVyIFRUTCBleHBpcmVzIC0gc2hvdWxkIGJlIENhY2hlXG4gICAgICBjb25zdCBhZnRlclRUTCA9IHtcbiAgICAgICAgc291cmNlOiAnY2FjaGUnIGFzIFByb3ZlbmFuY2VTb3VyY2UsXG4gICAgICAgIGZyZXNobmVzc01zOiBURVNUX1RUTF9NUyArIDEwMDAsXG4gICAgICAgIHByb2Nlc3NlZEF0OiBEYXRlLm5vdygpIC0gVEVTVF9UVExfTVMgLSAxMDAwXG4gICAgICB9O1xuICAgICAgXG4gICAgICBleHBlY3QoYWZ0ZXJUVEwuc291cmNlKS50b0JlKCdjYWNoZScpO1xuICAgICAgZXhwZWN0KGFmdGVyVFRMLmZyZXNobmVzc01zKS50b0JlR3JlYXRlclRoYW4oVEVTVF9UVExfTVMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ1tRUjp0b2RheTpjYWNoZV0gc2hvdWxkIHNob3cgYXBwcm9wcmlhdGUgYWdlIGZvciBjYWNoZWQgcmVzdWx0cycsICgpID0+IHtcbiAgICAgIGNvbnN0IHR3b0hvdXJzQWdvID0gRGF0ZS5ub3coKSAtICgyICogNjAgKiA2MCAqIDEwMDApO1xuICAgICAgXG4gICAgICBjb25zdCBtZXRhID0ge1xuICAgICAgICBzb3VyY2U6ICdjYWNoZScgYXMgUHJvdmVuYW5jZVNvdXJjZSxcbiAgICAgICAgZnJlc2huZXNzTXM6IERhdGUubm93KCkgLSB0d29Ib3Vyc0FnbyxcbiAgICAgICAgcHJvY2Vzc2VkQXQ6IHR3b0hvdXJzQWdvXG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgYWdlXG4gICAgICBjb25zdCBhZ2VJbkhvdXJzID0gTWF0aC5mbG9vcihtZXRhLmZyZXNobmVzc01zIC8gKDYwICogNjAgKiAxMDAwKSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtZXRhLnNvdXJjZSkudG9CZSgnY2FjaGUnKTtcbiAgICAgIGV4cGVjdChhZ2VJbkhvdXJzKS50b0JlKDIpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnW1FSOnRvZGF5OmhpZGRlbl0gSGlkaW5nIENvbmRpdGlvbnMgVGVzdHMnLCAoKSA9PiB7XG4gICAgaXQoJ1tRUjp0b2RheTpoaWRkZW5dIHNob3VsZCBoaWRlIHdoZW4gbm8gbWV0YWRhdGEgcHJvdmlkZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtZXRhID0gbnVsbDtcbiAgICAgIFxuICAgICAgLy8gQ29tcG9uZW50IHNob3VsZCBub3QgcmVuZGVyIHdpdGggbnVsbCBtZXRhXG4gICAgICBjb25zdCBzaG91bGRSZW5kZXIgPSBtZXRhICE9PSBudWxsICYmIG1ldGEgIT09IHVuZGVmaW5lZDtcbiAgICAgIFxuICAgICAgZXhwZWN0KHNob3VsZFJlbmRlcikudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnW1FSOnRvZGF5OmhpZGRlbl0gc2hvdWxkIGhpZGUgd2hlbiBwaXBlbGluZSBmYWlscycsICgpID0+IHtcbiAgICAgIGxldCBwaXBlbGluZUVycm9yID0gbnVsbDtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQaXBlbGluZSBwcm9jZXNzaW5nIGZhaWxlZCcpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcGlwZWxpbmVFcnJvciA9IGVycm9yO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBzaG91bGRSZW5kZXIgPSBwaXBlbGluZUVycm9yID09PSBudWxsO1xuICAgICAgXG4gICAgICBleHBlY3Qoc2hvdWxkUmVuZGVyKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChwaXBlbGluZUVycm9yKS50b0JlVHJ1dGh5KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdbUVI6dG9kYXk6cXVhbGl0eV0gUXVhbGl0eSBMZXZlbCBUZXN0cycsICgpID0+IHtcbiAgICBjb25zdCBxdWFsaXR5U2NlbmFyaW9zID0gW1xuICAgICAgeyBxdWFsaXR5OiAnaGlnaCcgYXMgUXVhbGl0eUxldmVsLCBleHBlY3RlZEJhZGdlOiAnSGlnaCcsIHNhbXBsZVNpemU6IDE2IH0sXG4gICAgICB7IHF1YWxpdHk6ICdtZWRpdW0nIGFzIFF1YWxpdHlMZXZlbCwgZXhwZWN0ZWRCYWRnZTogJ01lZCcsIHNhbXBsZVNpemU6IDEwIH0sXG4gICAgICB7IHF1YWxpdHk6ICdsb3cnIGFzIFF1YWxpdHlMZXZlbCwgZXhwZWN0ZWRCYWRnZTogJ0xvdycsIHNhbXBsZVNpemU6IDQgfVxuICAgIF07XG5cbiAgICBxdWFsaXR5U2NlbmFyaW9zLmZvckVhY2goKHsgcXVhbGl0eSwgZXhwZWN0ZWRCYWRnZSwgc2FtcGxlU2l6ZSB9KSA9PiB7XG4gICAgICBpdChgW1FSOnRvZGF5OnF1YWxpdHldIHNob3VsZCBoYW5kbGUgJHtxdWFsaXR5fSBxdWFsaXR5IHdpdGggbj0ke3NhbXBsZVNpemV9YCwgKCkgPT4ge1xuICAgICAgICBjb25zdCBtZXRhID0ge1xuICAgICAgICAgIHNvdXJjZTogJ3VuaWZpZWQnIGFzIFByb3ZlbmFuY2VTb3VyY2UsXG4gICAgICAgICAgcXVhbGl0eSxcbiAgICAgICAgICBzYW1wbGVTaXplLFxuICAgICAgICAgIGZyZXNobmVzc01zOiAxMDAwXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBleHBlY3QobWV0YS5xdWFsaXR5KS50b0JlKHF1YWxpdHkpO1xuICAgICAgICBleHBlY3QobWV0YS5zYW1wbGVTaXplKS50b0JlKHNhbXBsZVNpemUpO1xuICAgICAgICBcbiAgICAgICAgLy8gTWFwIHF1YWxpdHkgdG8gYmFkZ2UgdGV4dFxuICAgICAgICBjb25zdCBiYWRnZU1hcCA9IHtcbiAgICAgICAgICBoaWdoOiAnSGlnaCcsXG4gICAgICAgICAgbWVkaXVtOiAnTWVkJywgXG4gICAgICAgICAgbG93OiAnTG93J1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgZXhwZWN0KGJhZGdlTWFwW3F1YWxpdHldKS50b0JlKGV4cGVjdGVkQmFkZ2UpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdbUVI6dG9kYXk6aGV1cmlzdGljXSBIZXVyaXN0aWMgRmFsbGJhY2sgVGVzdHMnLCAoKSA9PiB7XG4gICAgaXQoJ1tRUjp0b2RheTpoZXVyaXN0aWNdIHNob3VsZCBzaG93IEZhc3QgYmFkZ2UgZm9yIGhldXJpc3RpYyBzb3VyY2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtZXRhID0ge1xuICAgICAgICBzb3VyY2U6ICdoZXVyaXN0aWMnIGFzIFByb3ZlbmFuY2VTb3VyY2UsXG4gICAgICAgIHF1YWxpdHk6ICdsb3cnIGFzIFF1YWxpdHlMZXZlbCxcbiAgICAgICAgc2FtcGxlU2l6ZTogNCxcbiAgICAgICAgZnJlc2huZXNzTXM6IDEwMCAvLyBWZXJ5IGZhc3RcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGV4cGVjdChtZXRhLnNvdXJjZSkudG9CZSgnaGV1cmlzdGljJyk7XG4gICAgICBleHBlY3QobWV0YS5mcmVzaG5lc3NNcykudG9CZUxlc3NUaGFuKDEwMDApO1xuICAgICAgXG4gICAgICAvLyBIZXVyaXN0aWMgc2hvdWxkIG1hcCB0byBcIkZhc3RcIiBiYWRnZVxuICAgICAgY29uc3Qgc291cmNlTWFwID0ge1xuICAgICAgICBoZXVyaXN0aWM6ICdGYXN0JyxcbiAgICAgICAgdW5pZmllZDogJ0ZyZXNoJyxcbiAgICAgICAgY2FjaGU6ICdDYWNoZScsXG4gICAgICAgIGxsbTogJ0xMTSdcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGV4cGVjdChzb3VyY2VNYXBbbWV0YS5zb3VyY2VdKS50b0JlKCdGYXN0Jyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdbUVI6dG9kYXk6dGVzdG1vZGVdIFRlc3QgTW9kZSBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBpdCgnW1FSOnRvZGF5OnRlc3Rtb2RlXSBzaG91bGQgcmVzcGVjdCBURVNUX1RUTF9NUyBlbnZpcm9ubWVudCB2YXJpYWJsZScsICgpID0+IHtcbiAgICAgIGNvbnN0IFRFU1RfTU9ERSA9IHByb2Nlc3MuZW52LlRFU1RfTU9ERSA9PT0gJzEnO1xuICAgICAgY29uc3QgVEVTVF9UVExfTVMgPSBwYXJzZUludChwcm9jZXNzLmVudi5URVNUX1RUTF9NUyB8fCAnNTAwMCcpO1xuICAgICAgXG4gICAgICBleHBlY3QoVEVTVF9NT0RFKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KFRFU1RfVFRMX01TKS50b0JlKDUwMDApO1xuICAgICAgXG4gICAgICAvLyBDYWNoZSBzaG91bGQgZXhwaXJlIGJhc2VkIG9uIFRFU1RfVFRMX01TXG4gICAgICBjb25zdCBjYWNoZUV4cGlyeVRpbWUgPSBURVNUX1RUTF9NUztcbiAgICAgIGV4cGVjdChjYWNoZUV4cGlyeVRpbWUpLnRvQmVMZXNzVGhhbigxMDAwMCk7IC8vIFNob3VsZCBiZSBzaG9ydGVyIHRoYW4gcHJvZHVjdGlvblxuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFZQUEsV0FBQSxHQUFLQyxJQUFJLENBQUMsMkNBQTJDLEVBQUU7RUFBQSxPQUFPO0lBQzVEQyxPQUFPLEVBQUVDLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDbEJDLE9BQU8sRUFBRUYsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztJQUNsQkUsVUFBVSxFQUFFSCxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO0lBQ3JCRyxLQUFLLEVBQUVKLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDaEJJLFVBQVUsRUFBRUwsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztJQUNyQkssUUFBUSxFQUFFTixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO0lBQ25CTSxRQUFRLEVBQUVQLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDbkJPLFdBQVcsRUFBRVIsSUFBSSxDQUFDQyxFQUFFLENBQUM7RUFDdkIsQ0FBQztBQUFBLENBQUMsQ0FBQztBQUVISixXQUFBLEdBQUtDLElBQUksQ0FBQyxhQUFhLEVBQUU7RUFBQSxPQUFPO0lBQzlCVyxTQUFTLEVBQUVULElBQUksQ0FBQ0MsRUFBRSxDQUFDO01BQUEsT0FBTztRQUFFUyxJQUFJLEVBQUVWLElBQUksQ0FBQ0MsRUFBRSxDQUFDO01BQUUsQ0FBQztJQUFBLENBQUMsQ0FBQztJQUMvQ1Usb0JBQW9CLEVBQUVYLElBQUksQ0FBQ0MsRUFBRSxDQUFDO01BQUEsT0FBTyxDQUFDLENBQUM7SUFBQSxDQUFDLENBQUM7SUFDekNXLEtBQUssRUFBRTtNQUFFQyxNQUFNLEVBQUU7SUFBZTtFQUNsQyxDQUFD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