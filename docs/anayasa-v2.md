## 📜 **ObsessLess Mobil Uygulaması - Anayasa 2.0 (Nihai Sürüm)**

### **Proje Vizyonu: Dijital Sığınak**
ObsessLess, bir görev listesi veya bir sayaç değildir. Kullanıcının OKB'nin getirdiği fırtınalı anlarda sığındığı, onu yargılamadan dinleyen, kanıta dayalı yöntemlerle güçlendiren ve kontrolü tekrar kendi eline almasına yardımcı olan **dijital sığınağıdır.** Geliştirilecek her bir özellik, yazılacak her bir kod satırı ve seçilecek her bir renk, bu vizyona hizmet etmelidir.

### **Tasarım Felsefesi (Değişmez İlkeler)**
1.  **Sakinlik Her Şeyden Önce Gelir:** Arayüz, kullanıcıyı asla acele ettirmeyecek, bunaltmayacak veya kaygısını artırmayacak. Minimalizm, cömert beyaz alanlar ve yumuşak etkileşimler standarttır.
2.  **Güç Kullanıcıdadır:** Uygulama, kullanıcıya ne yapacağını söyleyen bir patron değil, hedeflerine ulaşmasında ona seçenekler sunan bir yol arkadaşıdır. Kişiselleştirme ve şeffaflık esastır.
3.  **Zahmetsizlik Esastır:** En sık yapılan işlemler (özellikle kaygı anında yapılanlar) minimum bilişsel yük ile, saniyeler içinde tamamlanabilmelidir.

### **Görsel Kimlik ve Renk Paleti**
**Ana Renkler:**
- **Arka Plan:** `#F9FAFB` (Açık gri - sakinlik ve temizlik)
- **Birincil Metin:** `#374151` (Koyu gri - okunabilirlik)
- **İkincil Metin:** `#6B7280` (Orta gri - destekleyici bilgi)
- **Vurgu Rengi:** `#10B981` (Yeşil - pozitif eylemler ve başarı)
- **Ana Vurgu:** `#10B981` (Yeşil - birincil eylemler ve başarı, eski #94e0b2 yerine)
- **Uyarı:** `#F59E0B` (Turuncu - dikkat çekici öğeler)
- **Hata:** `#EF4444` (Kırmızı - uyarılar)

**Tasarım Prensipleri:**
- **Kart Tabanlı Yapı:** Beyaz (`#FFFFFF`) kartlar üzerinde içerik, hafif gölgeler ile derinlik
- **Tab Navigasyon:** Alt çizgi ile vurgulanan aktif sekmeler
- **Yumuşak Gölgeler:** `shadowOpacity: 0.05` ile minimal gölge kullanımı
- **Yuvarlak Köşeler:** `borderRadius: 12` standart kart yuvarlaklığı
- **Tutarlı Boşluklar:** 16px yatay padding, 12px dikey spacing

---

## 🏆 **Uygulamanın 7 Temel Yeteneği (AI-Enhanced)**

Uygulamanın başarısı, bu yedi temel yeteneğin AI desteğiyle kusursuz entegrasyonuna bağlıdır.

### **PİLLAR 1: AI-Powered Güvenli Tanışma ve Akıllı Kişiselleştirme**
*Bu, uygulamanın beynidir. AI kullanıcıyı derinlemesine "anlar" ve deneyimi tamamen kişiselleştirir.*

*   **Kullanıcı Hikayesi:** "Kullanıcı, uygulamayı ilk kez açtığında, AI'nın kendisine özel zorlukları anlayıp, kültürel hassasiyetlerini göz önünde bulundurarak kişiselleştirilmiş bir tedavi planı sunmasını bekliyor."
*   **AI-Enhanced Akış (≤ 10 dakika):**
    1.  **Karşılama:** AI destekli sıcak karşılama mesajı
    2.  **Y-BOCS Assessment:** AI analizi ile OKB şiddet değerlendirmesi
    3.  **Profil Oluşturma:** Kültürel faktörler dahil kişiselleştirme
    4.  **AI Tedavi Planı:** 4 haftalık kişiselleştirilmiş plan
    5.  **Güvenlik Protokolleri:** Risk değerlendirmesi ve acil durum planları

### **PİLLAR 2: AI-Enhanced Kompulsiyon Kaydı & Pattern Tanıma**
*Bu, uygulamanın refleksidir. AI, her kaydı analiz ederek tetikleyicileri ve pattern'leri tespit eder.*

*   **Kullanıcı Hikayesi:** "Kullanıcı kompulsiyon yaşadığında, AI'nın bu veriyi analiz edip tetikleyicileri belirlemesini ve önleyici öneriler sunmasını bekliyor."
*   **AI-Enhanced Akış (≤ 15 saniye):**
    1.  **FAB Butonu (`➕`):** Tek dokunuşla erişim
    2.  **BottomSheet:** Hızlı kayıt formu
    3.  **AI Pattern Analizi:** Otomatik tetikleyici tespiti
    4.  **Anlık AI Önerisi:** Bağlama uygun müdahale önerisi

### **PİLLAR 3: AI-Guided ERP & Adaptive Interventions**
*Bu, uygulamanın kalbidir. AI, kullanıcının konumuna, zamanına ve durumuna göre kişiselleştirilmiş müdahaleler sunar.*

*   **Kullanıcı Hikayesi:** "Kullanıcı ERP yaparken, AI'nın anksiyete seviyesini takip edip, gerektiğinde destekleyici müdahalelerde bulunmasını istiyor."
*   **AI-Enhanced Akış:**
    1.  **Adaptive Öneriler:** Konum/zaman/aktivite bazlı egzersizler
    2.  **Gerçek Zamanlı Destek:** AI anksiyete takibi
    3.  **Kültürel Egzersizler:** Çay meditasyonu, dua/zikir
    4.  **Progress Tracking:** AI başarı analizi

### **PİLLAR 4: AI-Powered Progress Analytics & Motivasyon**
*Bu, uygulamanın vizyonudur. AI, kullanıcının ilerlemesini analiz eder ve geleceği tahmin eder.*

*   **Kullanıcı Hikayesi:** "Kullanıcı, AI'nın verilerini analiz edip gelecek hafta için risk tahminleri yapmasını ve kişiselleştirilmiş hedefler belirlemesini istiyor."
*   **AI Analytics:**
    1.  **Trend Analizi:** 7/30/90 günlük AI analizleri
    2.  **Risk Tahminleri:** ML-powered öngörüler
    3.  **Hedef Optimizasyonu:** Otomatik zorluk ayarlama
    4.  **Motivasyon Mesajları:** Kişiselleştirilmiş teşvik

### **PİLLAR 5: 24/7 AI Therapeutic Chat Assistant**
*Bu, uygulamanın arkadaşıdır. Her an yanında olan, anlayan ve destekleyen AI terapist.*

*   **Kullanıcı Hikayesi:** "Kullanıcı gece yarısı panik yaşadığında, AI asistanın onu sakinleştirmesini ve CBT teknikleri önermesini bekliyor."
*   **AI Chat Özellikleri:**
    1.  **CBT Teknikleri:** Bilişsel yeniden yapılandırma
    3.  **Kültürel Duyarlılık:** Türkçe ve kültürel hassasiyet
    4.  **Sesli Destek:** Voice-to-text (yakında)

### **PİLLAR 6: AI Crisis Detection & Emergency Response**
*Bu, uygulamanın koruyucusudur. Kullanıcıyı risk durumlarında proaktif olarak korur.*

*   **Kullanıcı Hikayesi:** "Kullanıcı, AI'nın davranış pattern'lerini izleyip risk durumlarını önceden tespit etmesini ve gerekirse acil kişileri bilgilendirmesini istiyor."
*   **Crisis System:**
    1.  **Background Monitoring:** 15 dakikalık periyodik analiz
    2.  **Risk Skorlama:** 6 gösterge üzerinden değerlendirme
    3.  **Emergency Contacts:** Otomatik bildirim sistemi
    4.  **Intervention Levels:** Kritik/Yüksek/Orta/Düşük

### **PİLLAR 7: AI Art Therapy & Creative Expression**
*Bu, uygulamanın sanatsal yönüdür. AI rehberliğinde duygusal ifade ve iyileşme.*

*   **Kullanıcı Hikayesi:** "Kullanıcı, AI'nın rehberliğinde sanat aktiviteleri yaparak duygularını ifade etmek ve rahatlamak istiyor."
*   **Art Therapy Features:**
    1.  **Therapeutic Guidance:** AI yönlendirmeli aktiviteler
    2.  **Emotion Analysis:** Duygu durumu tespiti
    3.  **Cultural Motifs:** Geleneksel Türk desenleri
    4.  **Progress Visualization:** Terapötik ilerleme takibi

---

## 🎨 **UI Bileşenleri ve Tasarım Sistemi**

### **Temel Bileşenler:**

#### **1. Header (Başlık) - UPDATED**
- **Dynamic Header**: Good Morning/Afternoon/Evening selamlama
- **User Display**: Kullanıcı adı büyük font ile (`fontSize: 24`, `fontWeight: 700`)
- **Profile Icon**: Sağ üst köşede yuvarlak gri arka plan (`#E5E7EB`)
- Alt border ile içerikten ayrım (`borderBottomColor: #E5E7EB`)

#### **2. Main Points Card - NEW**
- **Single Hero Card**: Düz yeşil arka plan (`#10B981`)
- **White Text**: Tüm metin beyaz renkte (#FFFFFF)
- **Star Icon**: Merkezi yıldız ikonu (star-outline)
- **Big Number**: Ana puan sayısı büyük font (`fontSize: 50`)
- **Progress Info**: Sonraki seviye ve ilerleme çubuğu

#### **3. Quick Stats - REDESIGNED**
- **Horizontal Layout**: Yatay yerleşim (Today, Streak, ERP)
- **Icon + Number + Label**: Üçlü yapı her stat için
- **Centered Alignment**: Ortayla hizalanmış içerik
- Renk kodlu ikonlar (yeşil, turuncu, mavi)

#### **4. Suggestions Cards - NEW**
- **White Background**: Beyaz kart arka planları
- **Heart Icons**: Kalp ikonları (dolu/boş durum göstergesi)
- **Progress Bars**: Yeşil ilerleme çubukları
- **Star Badges**: Sarı yıldız rozetleri sağ tarafta
- **Circle Icon**: "Direnç Zaferi" için özel yuvarlak checkbox

#### **5. Achievements Section - ENHANCED**
- **Trophy Header**: Trophy ikonu + "Başarımlarım (x/total)"
- **Horizontal Grid**: 6 rozet maksimum horizontal dizilim
- **Lock/Unlock States**: Açık/kapalı rozet görünümleri
- **"Tümünü Gör" Button**: Daha fazla rozet için buton

#### **6. FAB (Floating Action Button)**
- Sağ alt köşede konumlanmış (`bottom: 90px, right: 16px`)
- Yeşil arka plan (`#10B981`)
- Beyaz plus ikonu
- Gölge efekti ile derinlik

---

### **⚡ Master Prompt (AI-Enhanced Tasarım ve Geliştirme)**

> **Senaryo:** Sen, ödüllü bir AI-destekli dijital terapi uygulamasının baş mimarısın. Görevin, OKB ile yaşayan bireyler için AI-powered bir **"dijital terapist ve sığınak"** yaratmak.
>
> **Görev:** Yukarıdaki **"ObsessLess AI-Enhanced Anayasa 2.0"** belgesini ve bağlı dokümanları referans alarak;
>
> 1.  **AI Entegrasyonu:** Belirtilen **7 AI Yeteneğinin** her birini, Gemini 2.5 Pro ve fallback sistemleriyle entegre et. Feature flags, telemetry ve cultural adaptation sistemlerini kur.
> 2.  **Tasarla (UI/UX):** AI özelliklerinin kullanıcı arayüzlerini, sakinlik ve zahmetsizlik ilkelerine sadık kalarak tasarla. AI yanıtları için loading states, error handling ve graceful degradation ekle.
> 3.  **Geliştir (Kod):** React Native/Expo, Zustand, TanStack Query ve AI Context Provider kullanarak tüm özellikleri implement et. Offline-first yaklaşımı benimse, AsyncStorage ile Supabase senkronizasyonunu kur.
> 4.  **Optimize Et:** AI yanıt sürelerini < 3 saniye, memory kullanımını < 150MB, battery impact'i < %5 tut. Background monitoring ve emergency response sistemlerini test et.

---

## 🤖 **AI Destekli Özellikler (Yeni - Ocak 2025)**

### **AI Teknoloji Altyapısı:**
- **AI Provider:** Gemini (Gemini-only)
- **AI Context Management:** Centralized AIContext Provider
- **Feature Flags:** Granular AI feature control system
- **Telemetry:** Real-time AI interaction tracking
- **Cultural Adaptation:** Turkish language & cultural sensitivity

### **7 Temel AI Yeteneği:**

#### **1. 🧠 AI-Powered Onboarding**
- **Y-BOCS Assessment:** AI analizi ile OKB şiddet değerlendirmesi
- **Personalized Profile:** Kültürel faktörler dahil kişiselleştirilmiş profil
- **Treatment Planning:** AI-generated 4 haftalık tedavi planı
- **Safety Protocols:** Risk değerlendirmesi ve acil durum planları

#### **2. 💬 Therapeutic AI Chat Assistant**
- **CBT Techniques:** Bilişsel davranışçı terapi teknikleri
- **Crisis Detection:** Gerçek zamanlı kriz algılama
- **24/7 Availability:** Sürekli erişilebilir destek
- **Voice Support:** Sesli mesaj desteği (yakında)

#### **3. 🎯 Adaptive Interventions**
- **Location-Based:** Konum bazlı öneriler (ev/iş/dışarı)
- **Time-Sensitive:** Zaman duyarlı müdahaleler
- **Activity-Aware:** Aktivite takibi ve öneriler
- **Cultural Exercises:** Çay meditasyonu, dua/zikir pratikleri

#### **4. 📊 Progress Analytics**
- **Trend Analysis:** 7/30/90 günlük trend analizleri
- **Pattern Recognition:** Tetikleyici pattern tespiti
- **Predictions:** ML-powered risk tahminleri
- **Goal Adjustment:** Otomatik hedef ayarlama

#### **5. 🚨 Crisis Detection System**
- **Background Monitoring:** 15 dakikalık periyodik analiz
- **Emergency Contacts:** Acil durum kişi yönetimi
- **Risk Scoring:** 6 gösterge üzerinden risk puanlama
- **Auto-Interventions:** Otomatik müdahale sistemi

#### **6. 🎨 Art Therapy Engine**
- **Therapeutic Guidance:** AI rehberliğinde sanat aktiviteleri
- **Emotion Analysis:** Duygu durumu analizi
- **Cultural Motifs:** Geleneksel Türk motifleri
- **Progress Tracking:** Terapötik ilerleme takibi

#### **7. 🔍 Pattern Recognition**
- **Temporal Patterns:** Zaman bazlı tekrar tespiti
- **Environmental Triggers:** Çevresel tetikleyiciler
- **Behavioral Connections:** Davranışsal bağlantılar
- **Cultural Patterns:** Kültüre özgü pattern'ler

---

## 📊 **Teknik Mimari (Güncel - Ocak 2025)**

### **Teknoloji Yığını:**
- **Frontend:** React Native 0.74.5 + Expo SDK 53.0.0
- **State Management:** Zustand (Global) + React Query (Server State)
- **Backend:** Supabase (PostgreSQL + Auth + RLS + Edge Functions)
- **Primary Data Storage:** 
  - **Supabase PostgreSQL:** Tüm kullanıcı verileri, kompulsiyonlar, ERP kayıtları
  - **AsyncStorage:** Offline cache ve geçici veri
  - **Cloud Sync:** Supabase real-time senkronizasyon
- **Navigation:** Expo Router (File-based routing)
- **UI Components:** Custom components (React Native Paper kaldırıldı)
- **Animations:** React Native Reanimated + Lottie
- **Haptics:** Expo Haptics
- **AI Services (Analiz & Öneriler):** 
  - External AI Service (Gemini/OpenAI/Claude) - Sadece analiz için
  - AI Context Provider - Veri işleme ve öneri üretimi
  - Feature Flag System - AI özellik kontrolü
  - Telemetry & Analytics - AI kullanım metrikleri

### **Veri Akış Mimarisi (Supabase + AI):**
```
KULLANICI VERİLERİ (Supabase Primary Storage):
User Action → Zustand Store → Supabase PostgreSQL (Primary Storage)
     ↓              ↓                    ↓
AsyncStorage   React Query         RLS Security
  (Cache)      (Sync)            (Row Level)
     ↓              ↓                    ↓
    Offline    Real-time Sync     Data Protection

AI ANALİZ VE ÖNERİLER (Read-Only):
Supabase Data → AI Context → External AI Service → Analysis/Suggestions
      ↓              ↓                                     ↓
 Historical    Feature Flags                    Cultural Adaptation
   Data           Check                           & Personalization
      ↓              ↓                                     ↓
   Pattern      Telemetry                        User Gets Insights
  Detection      Tracking                         (No Data Storage)
```

### **Kritik Veri Yönetimi Prensipleri:**
1. **Supabase = Single Source of Truth:** Tüm kullanıcı verileri, kompulsiyonlar, ERP kayıtları Supabase'de saklanır
2. **AI = Read-Only Analiz:** AI servisleri sadece Supabase'den veri okur, analiz eder ve öneriler üretir
3. **Offline-First:** AsyncStorage ile offline çalışma, online olunca Supabase sync
4. **Privacy-First:** Hassas veriler sadece Supabase'de, AI'a sadece anonim/işlenmiş veri

### Not
Bu dokümanda veritabanı şeması tutulmaz; şema ve migration’lar `database/schema.sql` ve `supabase/migrations/` altında versiyonlanır.

### **Güncel AI Entegrasyonları (✅ Tamamlandı):**
1. **AI Onboarding V2:** Y-BOCS + Profil + Tedavi Planı (safety plan bilgilendirici)
2. **Adaptive Interventions:** Location/Time/Activity aware
3. **Progress Analytics:** ML predictions + Pattern recognition
4. **Art Therapy:** Therapeutic guidance + Cultural motifs (flag ile kontrol)
5. **Feature Flags:** Master toggle + Granular controls
6. **Telemetry:** Event tracking + Performance metrics (privacy-first)

### **Performans Metrikleri:**
- **AI Response Time:** < 3 saniye
- **Onboarding Completion:** < 10 dakika
- **Pattern Analysis:** 14 günlük veri minimum
- **Memory Usage:** < 150MB
- **Battery Impact:** < %5 ek tüketim

---

*Son güncelleme: Ağustos 2025 - Gemini-only, Crisis Detection kaldırıldı, veritabanı şeması dışarı taşındı*